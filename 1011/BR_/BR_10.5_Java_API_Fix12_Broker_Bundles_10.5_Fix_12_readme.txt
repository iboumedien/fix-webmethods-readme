                           webMethods Broker Java API 10.5 Fix 12 readme

                                            September 2024

____________________________________________________________________________________________________

1.0   Fix Name
2.0   Fix ID
3.0   Product(s)/Component(s) Affected
4.0   Requirements and Dependencies
5.0   Platform Support
6.0   Cautions and Warnings
7.0   Fix Contents
8.0   Installation
9.0   Uninstallation
10.0  Globalization
11.0  Copyright
____________________________________________________________________________________________________


1.0 Fix Name

webMethods Broker Java API 10.5 Fix 12



2.0 Fix ID

BR_10.5_Java_API_Fix12



3.0 Product(s)/Component(s) Affected

This fix affects webMethods Broker 10.5.



4.0 Requirements and Dependencies

BR_10.5_Core_Fix6
OGI_10.5_Fix19
TPS_10.7_Loggers_Fix2
TPS_10.11_Loggers_Fix2

Fixes are cumulative. Therefore, for each of the listed fixes, you can install the specified fix or
later.

For language pack requirements, see the Globalization section of the Software AG Empower Product
Support website at https://empower.softwareag.com/Products/Globalization/default.asp



5.0 Platform Support

Same platforms as product release.



6.0 Cautions and Warnings

None.



7.0 Fix Contents

In addition to including resolutions to product defects, a fix may also include enhancements to
existing functionality and features. Any of these items can result in new or changed built-in
services, APIs, or configuration parameters. Review the fix contents carefully before installing the
fix.

This fix is cumulative, which means that it includes all previous fixes for the release.

PIF-15875
Broker Java Admin API now supports reporting storage cache utilization. API
BrokerServerClient.getStorageStats() now contains the following additional fields:
- sessions[].max_cache_kbytes -- (long) Maximum storage cache size.
- sessions[].current_cache_kbytes_inuse -- (long) Current storage cache size in use.

PIF-16211
Uninstallation fails for wMFix.Broker.SharedBundles fix with the following error:
Missing requirement: Broker Java Client API requires
'java.package; iaik.security.jsse.provider 0.0.0' but it could not be found.

This issue occurs due to incorrect fix dependencies. This issue has been resolved.
For webMethods suite versions 10.7 and 10.11, this issue has been resolved.
For webMethods suite version 10.5, this issue may still occur and to workaround the problem, attempt
the uninstallation of wMFix.Broker.SharedBundles again.

PIF-16240
Sometimes the following error appears in the log:
javax.jms.JMSException: [BRM.10.4001] JMS: No response from Broker.

This issue occurs when the connection loss is not properly detected by the caller.

This issue is resolved. Now, a proper exception appears when a connection loss is detected.

PIF-16130 (BR_10.5_Java_API_Fix11)
Installation fails for wMFix.Broker.SharedBundles_10.5.0.0010-0862 fix with the following error:
!MESSAGE Unable to satisfy dependency from com.softwareag.mom.broker.jms.client 10.5.0.0010-0862
to java.package; org.apache.logging.log4j       [2.16.0,3.0.0).

This issue occurs due to incorrect fix dependencies. This issue has been resolved.
With this change, the issue of PIF-15838 re-opens. At present, to workaround the issue, attempt
uninstallation again.

PIF-15838 (BR_10.5_Java_API_Fix10)
Uninstallation fails for wMFix.Broker.SharedBundles fix with the following error:
Missing requirement: Broker Java Client API requires
'java.package; iaik.security.jsse.provider 0.0.0' but it could not be found.

This issue occurs due to incorrect fix dependencies. This issue has been resolved.

PIF-15716 (BR_10.5_Java_API_Fix9)
Broker JMS API method WmJMSConfig.setKeepAliveAttempts() now sets the keep-alive attempts correctly.

PIF-15653 (BR_10.5_Java_API_Fix8)
Broker JMS API now uses in-built methods to encrypt passwords. Entrust library is no longer used.

PIF-15681 (BR_10.5_Java_API_Fix8)
webMethods Broker command line tools now use Entrust Toolkit from the Broker/lib directory.

PIF-15672 (BR_10.5_Java_API_Fix8)
webMethods Broker JMS Client throws following exception while processing very large messages:
java.lang.NegativeArraySizeException
at com.webmethods.jms.protocol.ProtocolHandler.read
at com.webmethods.jms.protocol.BinaryProtocolHandler.dispatch
at com.webmethods.jms.protocol.ProtocolHandler$LinkReader.run
at java.lang.Thread.run

This issue occurs because of an integer overflow error while attempting to increase the buffer size
from 1 GB to 2 GB.

This issue has been resolved. Now, Broker JMS Client should be able to process very large messages
up to 2 GB in size.

PIF-15564 (BR_10.5_Java_API_Fix7)
The Broker Java and JMS APIs now use Entrust Toolkit version 8.1.20.

With the latest Java fixes, the old Entrust Toolkit 8.0.33 cannot be used
as it is signed with the SHA1 algorithm.
With this update of Entrust Toolkit version to 8.1.20, Entrust as the
SSL provider does not work with Broker Java and JMS APIs, and
Broker command-line tools.

PIF-15497 (BR_10.5_Java_API_Fix6)
Installing 'Broker Bundles 10.5 Fix 5' fails due to a mismatch in Log4j dependency.

This issue is now resolved.

PIF-15431 (BR_10.5_Java_API_Fix5)
webMethods Broker does not allow changing the hostname of a remote Broker in a territory,
cluster and gateways. The hostname of a remote Broker gets stored during the creation of
the territory, cluster and gateways. If later, due to some reason the remote Broker
changes its hostname, this breaks the link between the connected Brokers.

webMethods Broker Server now supports updating the hostname of a remote Broker.
A new command-line tool 'broker_update' is provided to update the hostname of a remote Broker
through the Broker Java Admin API BrokerAdminClient.updateRemoteBrokerHostname().

PIF-15044 (BR_10.5_Java_API_Fix4)
Integration Server as a publisher/subscriber client is not metered for transaction based pricing.

PIF-15096 (BR_10.5_Java_API_Fix4)
The following changes are made to Broker Java APIs which are now compatible with any version of the
Broker Server:
a) BrokerAdminClient.getClientStatsById() BrokerAdminClient.getClientStatsByIds() These APIs now
return fields 'numEventsPublished', 'numEventsDelivered', 'lastConnectSession' and
'lastDisconnectSession' in both 'long' & 'int' datatypes.
b) BrokerAdminClient.getBrokerStats() API now return fields 'numTracesPublished',
'numEventsPublished', 'numEventsDelivered' and 'numEventsQueued' in both 'long' & 'int' datatypes.

PIF-15193 (BR_10.5_Java_API_Fix4)
Broker Server, Broker JMS, Java, and C client APIs now support TLS 1.3 protocol.

Broker Server and C APIs are now updated to use OpenSSL version 1.1.1k to support TLS 1.3 protocol.
The Broker client APIs now include the support for TLS 1.3 during an SSL connection, the Java JDK
must support TLS 1.3 to enable TLS 1.3 in Broker Java and JMS APIs.
Broker Server configuration parameter "ssl-accept-timeout" default value is changed to 30 seconds
to allow more time for SSL handshake to complete.

To configure Broker to only use TLS 1.3 during SSL communication: For Broker Server, select the
"TLSv1.3" option in the My webMethods Server > Applications > Administration > Broker Servers >
Servers > Change Broker Server SSL Settings page. The default option is "ALL".

When using Broker Java Admin API to configure SSL on the server, set the
BrokerSSLConfigV2.SSLProtocol parameter to TLSv1.3 in BrokerServerClient.setSSLConfigV2. The
default option is "ALL".

PIF-15061 (BR_10.5_Java_API_Fix3)
In webMethods Broker, unable to lookup JNDI objects after the installation of
Broker Java API 10.5 Fix 2. The following error message is displayed:
java.io.InvalidClassException: COM.activesw.api.client.BrokerEvent; local class
incompatible: stream classdesc serialVersionUID = 4049498353039593814, local
class serialVersionUID = -4787849573685321536

This issue is resolved.
You must re-create the JNDI entries for 'Cluster Connection Factory' if you have
previously created them using Broker Java API 10.5 Fix 2.

PIF-15006 (BR_10.5_Java_API_Fix2)
webMethods Broker can now report broker transaction metrics to the webMethods Metering Application.
These metrics are used to report customer's usage of webMethods Broker and allow transaction based
pricing to be applied based on the reported usage.

Key changes:
- Transaction metrics reporting begins when a Transaction-enabled license is applied to Broker.
- Metrics reported:
  BytesIn - number of bytes published during the metering period
  BytesOut - number of bytes consumed during the metering period
  MessagesIn - number of messages published during the metering period
  MessagesOut - number of messages consumed during the metering period
  ConnectionCount - number of connections established during the metering period
  TransactionCount - number of transactions initiated during the metering period
- Broker's metering reporting period is controlled through a new configuration -
  'metering-reporting-interval-sec' in the awbroker.cfg file, with a minimum value of 60 seconds and
  a maximum value of 3600 seconds. Broker will report metrics at this interval as deltas from the
  previous reports. If the above configuration is not present, then Broker checks for
  METERING_REPORTING_INTERVAL_SEC environment variable. Otherwise a default value of 600 seconds is
  used.
- Metrics collected from connections established by the Integration Server as a client will not be
  reported since they are metered at the Integration Server as a part of high level transaction.
- [BR_10.5_Core_Fix2 only] Broker's internal storage for broker and client statistics are changed in
  this fix. Hence, the storage from this fix cannot be used with older versions/fixes.
- [BR_10.5_Java_API_Fix2 only] Following changes are made to Broker Java APIs:
    a) BrokerAdminClient.getClientStatsById()
       BrokerAdminClient.getClientStatsByIds()
       - These APIs now return fields 'numEventsPublished', 'numEventsDelivered', 
        'lastConnectSession' and 'lastDisconnectSession' in both 'long' & 'int' data-types.
    b) BrokerAdminClient.getBrokerStats() API now return fields 'numTracesPublished',
       'numEventsPublished', 'numEventsDelivered' and 'numEventsQueued' in both 'long' & 'int' data-types.
    c) BrokerServerClient.getStats() API now returns new fields for current metering statistics:
        'isMeteringEnabled'
        'meteringLastReportTime'
        'meteringDeltaBytesIn'
        'meteringDeltaBytesOut'
        'meteringDeltaMessagesIn'
        'meteringDeltaMessagesOut'
        'meteringDeltaTransactions'
        'meteringDeltaConnections'
    d) BrokerAdminClient.getAllQueueStats() API is now deprecated.

PIF-15046 (BR_10.5_Java_API_Fix2)
broker_status.exe command-line tool shows broker statistics as negative numbers.

This issue is now resolved.

PIF-14846 (BR_10.5_Java_API_Fix1)
Integration Server shows high CPU usage and takes a long time to refresh the JMS trigger.

This issue occurs if there are a large number of triggers for a connection alias.
In case of a refresh, all trigger recreate consumers. Each recreate operation in turn performs a
lookup on XML DocumentBuilderFactory. That lookup can cause CPU intensive search through the
classpath.

This issue is now resolved.

PIF-14921 (BR_10.5_Java_API_Fix1)
webMethods Broker throws an exception and fails to load its entire JNDI (Java Naming and Directory
Interface) entries if it is unable to de-serialize any JNDI entry class object.

This issue is resolved.  Now, the Broker does not fail completely but continues to load JNDI entries
and retain the raw bytes of those JNDI entry class objects as it is.

PIF-14961 (BR_10.5_Java_API_Fix1)
In Deployer, an error is displayed when you perform a test connection to the webMethods 10.5 Broker
Server.

This issue occurs due to Broker Deployer incorrectly parsing the version string from the Broker
Server.

This issue is resolved.

PIF-14426 (BR_10.5_Java_API_Fix1)
Broker client displays an incorrect exception message when you enter an incorrect password during
the initialization of the SSL keystore file.

This issue is resolved. Broker client now displays the correct exception message.

PIF-14931 (BR_10.5_Java_API_Fix1)
Integration Server log shows the following error very frequently:
[BRM.10.4001] JMS: No response from Broker
 
This issue occurs when both client and server send a keep-alive request to each other, resulting in
a temporary deadlock in the client.
 
This issue is resolved.



8.0 Installation

Install using Software AG Update Manager. For instructions, see the documentation at
http://documentation.softwareag.com.

Install all of the following fixes, if available in Software AG Update Manager:
- Broker > Broker Java API 10.5 Fix 12
- Infrastructure > Libraries > Broker Libraries 10.5 Fix 12
- Infrastructure > Shared Platform > Bundles > Broker Bundles 10.5 Fix 12
- Designer > Shared Plug-ins > Broker Integration 10.5 Fix 12

When you apply the webMethods Broker Java API Fix, The Broker/lib and common/lib folders are updated
based on the components you have installed.

- If you have installed only webMethods Broker, applying the latest webMethods Broker Java API Fix
  will update both Broker/lib and common/lib folders.

- If you have installed webMethods Broker along with webMethods Integration Server and
  My webMethods, applying the latest webMethods Broker Java API Fix will update both Broker/lib and
  common/lib folders.

- If you have installed only webMethods Integration Server and My webMethods, the webMethods
  application that uses the Broker Java API jar is installed. In this case only the common/lib
  files will be present. Applying the Broker Java API Common Libraries will update only the
  common/lib folder.

- If you are using application servers such as WebSphere Application Server, JBoss, and WebLogic,
  you would have pointed the application server to the required jars in either the Broker/lib or
  common/lib folder. In this case applying the latest webMethods Broker Java API Fix will update
  both Broker/lib and common/lib folders.



9.0 Uninstallation

Note: These instructions can only be used to uninstall the most recently installed fix. This action
will revert your installation to the previously installed fix. You cannot use these instructions to
uninstall the previously installed fix.

Uninstall using Software AG Update Manager. For instructions, see the documentation at
http://documentation.softwareag.com.



10.0 Globalization

This fix conforms to the internationalization standards of the webMethods product suite and includes
support for operation in any country, locale, or language as specified in the Installing webMethods
Products guide. It was not tested with non-English configurations and non-ASCII data. However, this
fix has no globalization impact and can be applied to systems running in any supported locale or
configuration.


10.1 Localization

This fix does not require an updated language pack. It might contain new messages and these messages 
will appear in English.



11.0 Copyright

Copyright © 2024 Software AG, Darmstadt, Germany and/or Software AG USA Inc., Reston, VA, USA,
and/or its subsidiaries and/or its affiliates and/or their licensors.

The name Software AG and all Software AG product names are either trademarks or registered
trademarks of Software AG and/or Software AG USA Inc. and/or its subsidiaries and/or its affiliates
and/or their licensors. Other company and product names mentioned herein may be trademarks of their
respective owners.

Detailed information on trademarks and patents owned by Software AG and/or its subsidiaries is
located at http://softwareag.com/licenses .

This software may include portions of third-party products. For third-party copyright notices,
license terms, additional rights or restrictions, please refer to "License Texts, Copyright Notices
and Disclaimers of Third Party Products". For certain specific third-party license restrictions,
please refer to section E of the Legal Notices available under "License Terms and Conditions for Use
of Software AG Products / Copyright and Trademark Notices of Software AG Products". These documents
are part of the product documentation, located at http://softwareag.com/licenses and/or in the root
installation directory of the licensed product(s).
