                   IBM BigMemory Max 4.4.0 Fix 20 readme

                                        August 2025

____________________________________________________________________________________________________

1.0   Fix Name
2.0   Fix ID
3.0   Product(s)/Component(s) Affected
4.0   Requirements and Dependencies
5.0   Platform Support
6.0   Cautions and Warnings
7.0   Fix Contents
8.0   Installation
9.0   Uninstallation
10.0  Copyright
____________________________________________________________________________________________________


1.0 Fix Name

IBM BigMemory Max 4.4.0 Fix 20


2.0 Fix ID

TAB_4.4.0_Fix20


3.0 Product(s)/Component(s) Affected

This fix affects IBM BigMemory Max 4.4.0 components


4.0 Requirements and Dependencies

None.


5.0 Platform Support

This fix is supported on all platforms that IBM BigMemory Max 4.4 supports.


6.0 Cautions and Warnings

  Please note that after applying this fix the following libraries:

  > org.terracotta.toolkit-runtime-ee_4.X.X.X_XX.jar
  > net.sf.ehcache.ee_2.X.X.X_XX.jar

  will still be present in the  <install-dir>/common/runtime/bundles/tes/eclipse/plugins/ directory,
  but what is important is that only the latest version (e.g. 4.4.0.20_1) of the
  org.terracotta.toolkit-runtime-ee library and latest version (e.g. 2.11.0.20_1) of
  net.sf.ehcache.ee would be loaded and used by terracotta clients (such as Integration Server).
  The older versions will not be loaded into any run-times.

  Please ignore the old JAR files after fix installation.

  Servers should be updated with new version before clients are updated. Older clients are
  recognized by newer servers in the 4.4 codebase, however newer updated
  clients will not be recognized by older servers.


7.0 Fix Contents

  In addition to including resolutions to product defects, a fix may also include enhancements to
  existing functionality and features. Any of these items can result in new or changed built-in
  services, APIs, or configuration parameters. Review the fix contents carefully before installing
  the fix.

  This fix is cumulative, which means that it includes all previous fixes for the release.

  4.4.0.20
  Internal maintenance release



8.0 Installation

8.1 Shut down the server array. A safe shutdown procedure is as follows.

    a. Shut down the mirror servers using the stop-tc-server script. 
       If you are using a wrapper solution to manage the mirror servers, execute the wrapper shut
       down command to shut down the mirror servers instead of using the stop-tc-server script.

    b. Shut down the clients. A terracotta client will shut down when you shut down your application.

    c. Shut down the active servers using the stop-tc-server script.
       If you are using a wrapper solution to manage the servers, execute the wrapper shut down
       command to shut down the servers instead of using the stop-tc-server script.

8.2 This fix overwrites server scripts,wrapper configuration files and default tc-config.xml. If
    you have any custom settings defined on those files (ex:MaxDirectMemorySize), then you need to
    restore those settings back after applying the fix.

8.3 Install using IBM webMethods Update Manager. For instructions, see the documentation at
    https://docs.webmethods.io/.

8.4 The upgrade of the 3rd party library Shiro may create an issue for some users that will require
    a manual configuration change to the "shiro.ini" found in the ".tc/mgmt" directory of the
    user's home folder (the user that the TMS/TMC process runs as ~/.tc/mgmt/shiro.ini). Edit this
    file and restart the TMS/TMC.
     
    a. Blank browser page or a message from the browser indicating too many redirects, or similar.
       In [urls] section of file ~/.tc/mgmt/shiro.ini, locate the line in the that reads
       "/login.jsp = authc". Immediately above that line add the three following lines:

       /401.jsp = anon
       /403.jsp = anon
       /404.html = anon
      
       In the [main] section of file ~/.tc/mgmt/shiro.ini, add the following line:
      
       [main]
       shiro.filterOncePerRequest=true
   
    b. URLs containing semi-colon are blocked and 400 client error is thrown. 
       In the [main] section of file ~/.tc/mgmt/shiro.ini, add the following two lines to the top
       of the section:

       [main]
       invalidRequest = org.apache.shiro.web.filter.InvalidRequestFilter
       invalidRequest.blockSemicolon = false

    c. Previously, secure cookies in TMS were enabled by default, working only with TLS-secured 
       connections or localhost requests. Remote HTTP access required adding the following line to 
       the ~/.tc/mgmt/shiro.ini file:
       
       [main]
       securityManager.sessionManager.sessionIdCookie.secure = false
       
       The default value for this setting is now set to false. A restart of the TMS for changes
       to take effect.

8.5 The upgrade of the 3rd party library Jetty to v12+ will result in the following configuration changes:

    To allow an SSL connection from the managed agent, the SSL connector must be configured. If the TMS is deployed
    with the provided Jetty web server, add the following to /tools/management-console/etc/start.d/ssl.ini
    (in the BigMemory kit) as shown:

       jetty.sslContext.keyStorePath=etc/dev-keystore.jks
       jetty.sslContext.trustStorePath=etc/dev-keystore.jks
       jetty.sslContext.keyStorePassword=terracotta
       jetty.sslContext.trustStorePassword=terracotta
       jetty.sslContext.keyManagerPassword=terracotta

9.0 Uninstallation

  Note: These instructions can only be used to uninstall the most recently installed fix. This action
  will revert your installation to the previously installed fix. You cannot use these instructions to
  uninstall the previously installed fix.

9.1 Shut down the server array. A safe shutdown procedure is as follows.

    a. Shut down the mirror servers using the stop-tc-server script. 
       If you are using a wrapper solution to manage the mirror servers, execute the wrapper shut
       down command to shut down the mirror servers instead of using the stop-tc-server script.

    b. Shut down the clients. A Terracotta client will shut down when you shut down your application.

    c. Shut down the active servers using the stop-tc-server script.
       If you are using a wrapper solution to manage the servers, execute the wrapper shut down
       command to shut down the servers instead of using the stop-tc-server script.

9.2 Uninstall using IBM webMethods Update Manager. For instructions, see the documentation at
    https://docs.webmethods.io/.


10.0 Copyright

Copyright IBM Corp. 2024, 2025