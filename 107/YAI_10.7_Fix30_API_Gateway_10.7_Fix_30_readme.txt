                 webMethods API Gateway 10.7 Fix 30 Readme

                         July 2024

_________________________________________________________________


Contents:

1.0   Fix Name
2.0   Fix ID
3.0   Product(s)/Component(s) Affected
4.0   Fix Requirements
5.0   Fix Contents
6.0   Platform Support
7.0   Cautions and Warnings
8.0   Installation
9.0   Uninstallation
10.0  Globalization
11.0  Copyright
12.0  Contacting Us



1.0 Fix Name

webMethods API Gateway 10.7 Fix 30


2.0 Fix ID

YAI_10.7_Fix30


3.0 Product(s)/Component(s) Affected

This fix affects webMethods API Gateway 10.7


4.0 Fix Requirements

For language pack requirements, see the Globalization section
of the Software AG Empower Product Support website at
https://empower.softwareag.com/Products/Globalization/default.asp


5.0 Fix Contents

In addition to including resolutions to product defects, a fix may also include enhancements to
existing functionality and features. Any of these items can result in new or changed built-in services,
APIs, or configuration parameters. Review the fix contents carefully before installing the fix.

This fix is cumulative, which means that it includes all previous fixes for the release.

YAI-37772 (Fix 30)
After a restart, API Gateway resets the access mode of a port from 'Allow' to
'Deny'.

This issue is resolved.

YAI-37779 (Fix 30)
Issue with URL encoding in native endpoints

Sending a plus '+' character as part of a URL to the native service always fails 
because it gets encoded to '%2B'.

This issue is resolved.

To send an encoded '%2B' to your native service as part of a URL, set the 
extended setting sendClientRequestURI to true

YAI-31564 (Fix 30)
Elements with the “nullable: true” property in OpenAPI schemas are not
validated.

This issue is resolved.

YAI-31623  (Fix 30)
Cannot activate an API with Validate API Specification policy.

APIs enforced with the Validate API Specification policy that include HTTP
headers without a defined value, cannnot be activated. Also, archives with
such APIs cannot be imported.

This issue is resolved.

YAI-31787 (Fix 30)
useJSSE parameters for ports are not applicable anymore.

This issue is resolved. As Integration Server has dropped the support of the
parameter useJSSE with PIE-72765, it is now also no longer supported by
API Gateway and therefore removed from the API Gateway UI.


YAI-37465 (Fix 30)
Saving an API fails despite providing correct XPath payload expression.

When you use square brackets in an XPath expression for request transformations,
saving the API fails with the error message: 'Query expression cannot be empty'

This issue is resolved.

YAI-37486 (Fix 30)
Discriminator does not work as expected.

API Schema validation fails to work as expected when enabled with the defined
discriminator at the schema level.

This issue is resolved. The discriminator concept is introduced in the open API.

YAI-32212 (Fix 30)
Fault Count Monitor events continue to generate after you remove the monitor
performance policy.

When you remove the monitor performance policy from the API on an API Gateway
Server in a cluster, new alerts still appear.

The issue is resolved.

YAI-32288 (Fix 30)
Unable to create a SOAP API from a zip file containing WSDL and XSDs

When you create a SOAP API from a zip file, the API creation fails if
the imported schema lacks a namespace definition in the WSDL and the
corresponding XSD lacks a targetNamespace.

The issue is resolved.

YAI-31978 (Fix 30)
APIGateway utilizes a very high heap memory. 

The expired materialized tokens occupies the heap memory even after running 
a rest service to purge the tokens from memory. Previously the tokens were 
not getting purged from the heap memory 

This issue is resolved.

YAI-31955 (Fix 30)
REST-enabled SOAP API fails during runtime invocations.

API Gateway throws an exception during SOAP to REST transformation while parsing
the WSDL if an attribute is null.

This issue is resolved.

YAI-32070 (Fix 30)
A vulnerable third-party component Jersey is used

Jersey, a third-party component, is vulnerable to information disclosure 
(Snyk ID SNYK-JAVA-ORGGLASSFISHJERSEYCORE-125563) and XML entity expansion 
(Snyk ID SNYK-JAVA-ORGGLASSFISHJERSEYMEDIA-59597).

The issue is resolved.

YAI-31283(Fix 29)
XPath expressions for SOAP requests do not function properly when the XML
payload contains namespaces.

This issue is resolved.

YAI-31309(Fix 29)
JSON schema validation is failing incorrectly when the oneOf with type array combination is used in the JSON schema

YAI-31145(Fix 29)
Exporting ports fails when portClusteringEnabled is set to false.

Exporting ports fails when port clustering is disabled by setting the parameter
portClusteringEnabled to false.

This issue is resolved.

YAI-30919(Fix 29)
API Gateway health shows yellow for Integration Server, when ServiceThread is
disabled from the health gauge indicators.

When ServiceThread, Memory, or Diskspace is disabled through the Integration
Server UI, API Gateway always returns yellow status for the IS health check.

This issue is resolved.
Now, when you disable the ServiceThread, Memory, or Diskspace through IS UI
from the health gauge indicators, API Gateway health check results are no longer
affected by these factors.

YAI-30353(Fix 28)
The "Invoke webMethods IS" policy pipeline does not transmit the custom field
added to the transaction events.

The custom field included in the transaction events is not forwarded within the
pipeline when invoking the IS service in the runtime request for an API that is
subjected to the Invoke webMethods IS policy.

This issue is resolved.

YAI-30430(Fix 28)
Warning messages 'Could not find a policy info' logged unexpectedly.

The following warnings are logged in API Gateway server.log:
[YAI.0204.0005W] (...) Could not find a policy info for this key in the CCC
cache. This happens when you define scopes for APIs and define Traffic Monitor
policies for theses scopes. The warning messages are logged when you use
resources of the API, where these scopes are not defined.

This issue is resolved.

YAI-29983(Fix 28)
Elements with the “nullable: true” property in OpenAPI schemas are not
validated.

This issue is resolved.

YAI-29864(Fix 27)
Custom variable value is not populated in Response processing policy. Empty value is returned.
The issue is resolved now.

YAI-29421 (Fix 27)
The policy templates display two "Header transformation" properties in the 
"Conditional Error Processing" under Policy Configuration. REST and SOAP APIs 
should have a distinguished Header Transformation label.
 
This issue is fixed.

YAI-30300 (Fix 27)
Promotion management issues with Global Policies

The following two issues are observed with Promotion management.

1. In the Promotion management page, when you search for Global Policies,
Threat Protection, or Policy Template assets using the 'Search by Type'
filter, appropriate results are not retrieved.

2. In the Promotion management page, the 'Show more...' button on the 'Promotion'
screen does not work when there are 10 or more assets.

These issues are resolved.

YAI-29596 (Fix 27)
Accessing APIs without specifying a version returns inconsistent information.

When you send a request without specifying a version to call a WSDL of an API,
which has multiple versions, it is observed that the request retrieves WSDL of
different API versions. This behavior is sometimes observed after API Gateway
is restarted.

This issue is resolved.
Now, when you use the WSDL request without specifying a version, the request
only retrieves the WSDL of the fixed version of the API, for example the latest
version.

YAI-29919 (Fix 27)
Continuous increase in memory leakage on using validate schema.

During the runtime invocations, the usage of Validate API Specification policy 
causes memory leakage and performance degradation. 

This issue is resolved.

YAI-30201 (Fix 27)
Strategy created in one node is not deployed to other nodes in a Cross DC setup.

When creating a strategy for an application in one node in a Cross DC setup,
this strategy is not deployed to the other nodes in the Cross DC setup.

This issue is resolved.

YAI-30096 (Fix 27)
API Gateway logs display JsonMappingException error.

When working with larger json files, API Gateway log files display errors such
as JsonMappingException: String length (20054016) exceeds the maximum
length (20000000).

This issue is resolved.
In API Gateway, the maximum string length for json is now increased to
2,147,483,64 and the watt property 'watt.server.json.decode.maxStringLength' is
set to this maximum value at startup.

YAI-30023 (Fix 27)
Vulnerable third party component Guava being used.

CVE-2023-2976

This issue is resolved.

YAI-29913 (Fix 27)
Outbound proxy passwords are corrupted.

The passwords of outbound proxies are found to be corrupted after installation
of API Gateway 10.11 fix 20. All outbound communication through the proxy fails.
While the API Gateway is up and running it is possible to correct the password
from the administration UI. However, after the next restart of the API Gateway
the password is again corrupted. The corrupted password sent to the outbound
proxy has the value "********************************".

This issue is resolved.

YAI-29419 (Fix 26)
Incorrect JSON schema validation during API Invocation.

When a request payload has nested level properties, and if the 
additionalProperties is set to false, then the JSON Schema validation does not
identify the incorrect additional properties. 

This issue is now resolved.

YAI-29207 (Fix 26)
There is an inconsistency in analytics 'API Provider time'. 

In Analytics, SOAP API calls that have read timeouts are displaying the provider 
time as 0.

This issue is resolved.

YAI-29022 (Fix 25)
Unable to edit API policies.

The "An error occurred while loading policy information." error message appears
when you edit an API policy.

This issue is now resolved.

YAI-28984 (Fix 25)
Analytics does not appear properly for response payloads when retrieved from 
cache memory.

When you enforce Service Result Cache policy on an API, and if you invoke the 
API more than once, then API Gateway retrieves the response from the cache 
memory for the second invocation onwards. In such case, the API analytics for
the responses retrieved from cache does not appear properly.

This issue is now resolved.

YAI-28811 (Fix 25)
Resource path is inaccurate when the API is invoked without an API version.

If you invoke an API using an endpoint without the API version, then the
the resource path does not include a forwarding slash.

The issue is now resolved.

YAI-29341 (Fix 25)
Security vulnerability identified in third party packages.

To enhance the security, the following third party packages are removed:
WmAPIGateway/cli/lib/spring-web-5.3.23.jar,
WmAPIGateway/code/jars/static/json-20211205.0.0.jar

This issue is resolved.

YAI-29331 (Fix 25)
SOAP API activation dialog box does not accommodate long custom endpoints.

If you have defined long custom endpoints for SOAP API and when you try to
activate it, the activation dialog box displays only half of the endpoint.

This issue is resolved by accommodating long endpoints within the activation
dialog box.

YAI-29285 (Fix 25)
API Gateway starts partially with a JsonMappingException error.

API Gateway startup fails, and the server.log contains a JsonMappingException
"String length (5046272) exceeds the maximum length (5000000)".

This issue is resolved.
To avoid the JsonMappingException configure API Gateway with a larger value for
the JSON maximum string length. To achieve this, set the 'jsonMaxStringLength'
Java system property in the <sag_inst>/profiles/IS_default/configuration
/custom_wrapper.conf file. For example,
"wrapper.java.additional.1100=-DjsonMaxStringLength=15000000".
Alternatively, you can configure the JSON maximum string length by setting the
'jsonMaxStringLength' environment variable in the <sag_inst>/profiles/
IS_default/bin/custom_setenv.sh file (or custom_setenv.bat under Windows).
For example, "export jsonMaxStringLength=15000000" or
"set jsonMaxStringLength=15000000" for Windows.

If a similar error occurs as follows, "The incoming YAML document exceeds the
limit: 3145728 code points.", then you must configure the YAML code point limit
with the "yamlCodepointLimit" Java system property or environment variable, in
the same way as described above.

YAI-29161 (Fix 25)
API Gateway health endpoint returns yellow status intermittently.

When multiple health endpoint calls are made in parallel the returned status can
be yellow. At the same time, the diskspace, memory, and servicethread fields are
empty.

This issue is resolved.

YAI-29018 (Fix 25)
While importing an archive, the AWS configuration is imported wrongly when the
master password is changed.

When importing an archive with an AWS configuration with the archive created
with a different master password then the one used in the current API Gateway
installation, the AWS configuration gets imported with an error. All APIs that
use the AWS configuration fail to import with the following exception:
IllegalArgumentException: Access key cannot be null.

This issue is resolved. AWS configurations are no longer imported if the master
password does not match.

YAI-28378 (Fix 25)
If you generate a sample JSON input of a REST enabled SOAP service for an 
array element, then a string type element is generated instead of array.

This issue is resolved.

YAI-29294 (Fix 25)
Old Client ID and Client secret still valid in cluster node after refresh.

After refreshing the OAuth2 strategy for an application on one cluster node, the
Client ID and Client secret are regenerated. But the old Client ID and Client
secret are still valid on the other cluster nodes and can be used to create a
new valid access token. Existing access tokens are also still valid in the
other cluster nodes.

This issue is resolved.


YAI-28889 (Fix 24)
Custom variables are not being assigned in runtime during API invocation for
an API that has a custom extension policy that is enforced during the error
handling phase.

This issue is resolved.

YAI-28109 (Fix 24)
Unable to create a Stage for a https URL.

In the Promotion management page, unable to create a Stage for a https URL
without entering the keystore alias and key alias.

This issue is now resolved.

YAI-28462 (Fix 24)
Importing a SOAP API with an application as its dependency doesn't update the 
application's APIs section correctly. Only the imported API is displayed in the 
application's APIs section.

The issue is resolved.


YAI-28356 (Fix 24)
API Mocking with condition to check integer field returns empty response.

When the integer data in the API request body is matched with mocking condition,
the response payload is empty.

This issue is now resolved.

YAI-28889 (Fix 24)
Custom variables are not being assigned in runtime during API invocation for
an API that has a custom extension policy that is enforced during the error
handling phase.

This issue is resolved.


YAI-28901 (Fix 24)
Performance issues observed when changing global polices for many APIs.

When activating, deactivating or updating a global policy that affects a large
number of Soap APIs, these operations can take a long time.

This issue is resolved by improving the performance.

YAI-28871 (Fix 24)
The error message "The service cannot be found for the endpoint reference (EPR)" was created by Axis. The reason is in PGService we have defined the supported transport protocols for the axis service, which was the same as defined in the transport policy rule.

axisService.setExposedTransports(transports);


Now we always define the supported transport protocols to HTTP and HTTPS for the axis service. 

axisService.setExposedTransports(Arrays.asList(Constants.TRANSPORT_HTTP, Constants.TRANSPORT_HTTPS));

 
In that case Axis is not throwing an exception and the error handling of not supported protocols is done in the API Gateway transport Enable HTTP/HTTPS policy.

YAI-28834 (Fix 24)
Externalized configuration for AuthServer fails.

An externalized configuration with an alias for an external authorization
server is not accepted. The server.log contains the error message
"[YAI.0013.9999E] Exception : Error loading configuration from YAML file source.
Reason: java.lang.NullPointerException".

This issue is resolved.


YAI-28618 (Fix 24)
Importing a WSDL fails.

Creating a new API from a WSDL in the API Gateway UI fails with the error
message "Unable to create an API because of an invalid input wsdl file. Reason:
Error while analysing schemas to be imported: error: src-resolve: type
'<type>@<namespace>' not found".

This issue is resolved.


YAI-28532 (Fix 24)
AppMesh deployment ends with an error message.

Each AppMesh deployment ends with an error message as the update of Kubernetes
service fails.

This issue is now resolved.

YAI-28486 (Fix 24)
When an API is using two global policies and you deactivate one global policy,
it is observed that the second global policy does not work.

When an API is using two global policies and you deactivate one global policy,
then the other other global policy stops working. This might happen if one
global policy is defining Traffic Optizmization policy and the other is defining
a Monitor SLA or Monitor Performance policy.

This issue is resolved.

YAI-28409 (Fix 24)
API zip file includes the native WS policy

In contrast to the WSDL loaded in the browser with the API Gateway endpoint, 
the WSDL packed in the API zip file contains the native WS policy incorrectly.

The issue is resolved.

YAI-28386 (Fix 24)
The internal API, exchangeidtoken, does not work as expected. 

When you invoke the internal API, exchangeidtoken with JWT as a bearer token, 
then the access token is not sent to the client.

 The issue is resolved.

YAI-28180 (Fix 23)
Unable to reset master password.

When an asset having secrets is imported from a APIGateway which has different master password, the secrets gets corrupted in the import. As a result the master password cannot be reset.

The issue is resolved by reverting to the old secret if there is an error while importing secret.

YAI-28306 (Fix 23)
When a large number of parallel requests are sent to a SOAP API, an error
message "Error in the API Gateway outbound client. null" is sporadically sent
to the client.

The issue is resolved.

YAI-28060 (Fix 23)
Unable to load the API details page due to cache issue.

The API details page in the API Gateway UI does not load, as the required
API details are not available in cache.

This issue is now resolved.

YAI-28211 (Fix 23)
wsimport command fails with an exception

An XSD request sent to API Gateway could not find the correct service name 
because the request did not have the correct URL alias.

The issue is resolved.

YAI-27939 (Fix 23)
Invocations of a SOAP API enforced with "Validate API Specification" policy
fails with error message.

When multiple parallel invocations occur for a SOAP API enforced with
"Validate API Specification" policy, an error message is seen.

This issue is resolved.

YAI-28008 (Fix 23)
Vulnerable 3rd party component netty is used.

CVE-2022-41881

This issue is resolved.

YAI-28086 (Fix 23)
Performance issues observed when changing global polices for many APIs.

When activating, deactivating or updating a global policy that affects a large
number of APIs, these operations can take a long time.

This issue is resolved by improving the performance.

YAI-28161 (Fix 23)
Exceptions in TerracottaClusterNotifier class are logged with the log level as
Trace.

This issue is resolved. The log level is now set to Warning as expected.

YAI-28238 (Fix 23)
Updating aliases in a cluster environment leads to a memory spike.

After updating aliases, which are used in many APIs, in a cluster environment, a
fast growing memory usage is observed. The heap memory usage grows because of
the number of notifications in the queue.

This issue is resolved.


After updating aliases, which are used in many APIs, in a cluster environment, a
fast growing memory usage is observed. The heap memory usage grows because of
the number of notifications in the queue.

This issue is resolved.

YAI-28365 (Fix 23)
Clicking the AppMesh tab logs out users with insufficient privileges.

A user without the functional privilege 'Manage general administration
configurations' is still able to see the AppMesh tab in the API Gateway UI.
Clicking the AppMesh tab logs out the user from API Gateway UI.

This issue is solved.
A user without the 'Manage general administration configurations' privilege does
not see the AppMesh tab.

YAI-28420 (Fix 23)
SOAP API details are not visible in the API details page after API Gateway
migration.

If you introduce a new API field in a SOAP API, the API details are not visible
in the API details field after migration as the new field is not recognized by
earlier versions of API Gateway.

This issue is resolved.

YAI-27691 (Fix 23)
Users are able to search multiple times for the same type, while maintaining selected results. 

YAI-27952 (Fix 23)
When you invoke a mocked API with no mocking condition and no default response,
one of the available response code with an empty response is returned.

This issue is resolved. The available response body is returned.

YAIC-4743 (Fix 23)
Error when validating the JSON Web Token (JWT)

The error message "Comparison method violates its general contract!"
appears sporadically when validating JWT for an external authorization
server.

This issue is resolved.

YAI-27135 (Fix 23)
API Gateway sets HTTP 200 response code for Connection Timeout and Connection
Reset errors.

It is observed that for Connection Timeout and Connection Reset errors
API Gateway sets the response code as HTTP 200.

This issue is resolved. API Gateway now sets the response code to 500 for these
scenarios.

YAI-27922 (Fix 23)
When promoting an API, it is possible to include the API-Application relations associated with the API. 
For this the "Include application registrations" checkbox on the last page of the promotion wizard needs to be selected.

YAI-28074 (Fix 23)
Importing an inactive global policy does not disable the policy.

When an active global policy is overwritten by an import of an inactive version
of it, this policy is shown as inactive in the API Gateway UI. But the policy
is still active when service requests are made on APIs that are using it.

This issue is resolved.

YAI-27966 (Fix 23)
Throttling policy is incorrectly enforced while the API is updated

When updating a throttling policy for an API or a global policy while requests are triggered against this API, it has been observed that the requests unexpectedly responded with an HTTP status 429 for a short period of time.

This issue is resolved.

YAI-27961 (Fix 23)
Vulnerable 3rd Party Component aws-java-sdk-s3 is used.

CVE-2022-31159

This issue is resolved.

YAI-27812 (Fix 23)
The externalized configuration of API Gateway UI HTTPS port fails.

The externalized configuration of API Gateway UI's HTTPS port fails as it does
not accept the custom keystore password.

This issue is fixed.

YAI-27806 (Fix 23)
Incorrect error message in Response schema validation.

When there is failure in Validate API Specification in the response stage,
the error message sent to the client is specified as "request" instead of
"response"

The issue is resolved.

YAI-27931 (Fix 23)
Response Transformation Policies enforced on the outgoing response for
a Callback API is not executed in the callback response to the client.

This issue is resolved.

YAI-27099 (Fix 23)
Incorrect API creation.

An incorrect API is created if you do not provide any value in the Parameters
field of the Callbacks section when creating an OpenAPI.

This issue is resolved.

(Fix number 22 omitted intentionally)

YAI-27364 (Fix 21)
On invoking a REST API, the Global Ports Access Mode and IP Access Mode
responds with 404 error.

On invoking a REST API, the following REST calls to receive global Access Mode
and IP Access Mode configurations for ports return with HTTP status
404 - Invalid Listener.
ports/global/ipAccessMode
ports/global/accessMode

This issue is resolved.

YAI-27247 (Fix 21)
Unable to purge expired OAuth2 tokens.

When you invoke the "pub.oauth:removeExpiredAccessTokens" service for strategies
having refresh count as 0, the expired OAuth2 tokens fetched for Authorization
Code grant type are not purged.

This issue is resolved.

YAI-26827 (Fix 21)
Registration port connection to IS does not work after a reboot of an
API Gateway node.

When using external ports with registration ports, in some cases the external
ports do not work correctly after a reboot of an API Gateway node. At times it
is observed that the API Gateway UI adds a blank entry to the list of ports.

This issue is resolved.

YAI-26728 (Fix 21)
The analytics dashboard fails to load on clicking the 'Refresh' button.

If the 'enableTeamWork' parameter is set to 'true' in the 'Extended Settings'
page, API Gateway-wide analytics fail to load occasionally on clicking the
'Refresh' button in Administration > Analytics.

This issue is resolved.

YAI-27312 (Fix 21)
API activation fails with 'StackOverflowError' error.

While activating APIs some functions might fail with 'StackOverflowError'. This
might happen due to the functions being executed in a thread without enough
thread space.

This issue is resolved.
Now, during API activation, the critical functions are handled separately. A new
extended setting 'pg.runtime.extended.stackSize' is introduced. You can use the
extended setting under Adminstration > General > Extended settings section to
adjust the thread space size. The size is specified in MB. The default value is
set at 20 MB.

YAI-27105 (Fix 21)
Web Services configured as SOAP 1.1 do not behave SOAP 1.1 compliant.

Requests to a native API sent from API Gateway do return its current HTTP
response code upon a failure. This is not compliant to the SOAP specification.

This issue is resolved. Now, a new extended setting 'retainSOAPResponseStatus'
is included to support the SOAP specification.
When this parameter is set to true the native API responses retain the SOAP
response status upon a failure. The default value is true.
When this parameter is set to false, all response codes from the native SOAP API
are converted to HTTP 500 (Internal Server Error).

YAI-26913 (Fix 21)
The extended setting 'return408ForConnectionTimeout' does not work as expected.

The return408ForConnectionTimeout extended setting does not work for SOAP
requests. That is when the value is changed from true to false there is no
change in the API Gateway response.

This issue is resolved.

YAI-27481 (Fix 21)
Angular and curly brackets specified in API invoking URLs are not encoded when
passed to native service.

According to the URI specifications, the angular brackets <,> and curly
brackets {,} are not reserved characters and they must be encoded. However,
they are not encoded when the API invoking URL contain these characters.

This issue is resolved. The mentioned characters are encoded as per
the URI specification.

YAI-27054 (Fix 21)
Incorrect API appears when you access a disabled API.

When there are two versions of a SOAP API, if you disable one of them, and if
you access the disabled API's endpoints then the existing API is invoked.

This issue is resolved.

YAI-25180 (Fix 21)
When you generate an OpenAPI 3.0 JSON file, some JSON schemas of type ‘array’
are not included.
As a result, an error message appears during generation.

This issue is resolved.

YAI-27572 (Fix 21)
Error message appears during strategy creation.

When you create a strategy for an application that uses external authorization
server, the "Token lifetime mandatory" message appears.

This issue is resolved.

YAI-27511 (Fix 21)
Opening the AppMesh tab in API Gateway UI displays an error message.

When AppMesh is correctly configured in the API Gateway UI and the user opens
the AppMesh tab, an error message pops up with the message: 'Service Error'.

This issue is resolved.

YAI-27492 (Fix 21)
API mocking conditions with XPath expressions for SOAP requests do not work,

API mocking conditions with XPath expressions for SOAP requests do not work
when the request contains xml payload as input and the XPath has a
namespace prefix.

This issue is resolved. Now API mocking works for a SOAP API when the XPath
does not contain namespace prefixes.

YAI-27450 (Fix 21)
Updated Partner Id value is not reflected.

When you have used the ${request.application.partnerId} variable in any of the 
policies and if you update the Partner Id value of an application then the 
value of the identified application's Partner Id is not returned correctly.

The issue is resolved.

YAI-27413 (Fix 21)
Creating an API based on WSDL fails

Creating a SOAP API based on WSDL fails with an unknown type error message when
the wsdl imports or includes XSD schemas.

This issue is resolved.

YAI-27202 (Fix 21)
Importing a 10.3 archive fails with an error.

Importing a 10.3 archive that contains an application using a strategy fails
with a NullPointerException.

This issue is resolved.

YAI-27183 (Fix 21)
APIs are disabled when API Gateway is shut down before the startup is completed.

In some cases, APIs are unintentionally disabled when API Gateway shutdown or
restart process is performed, before the startup process is completed.

This issue is resolved.

YAI-27171 (Fix 21)
Incorrect log entry included for API delete events.

When you delete an API from one of the nodes in an API cluster, the API is
deleted correctly from that node. The server log file of other nodes in the
cluster includes the following error log for the API delete event:
"Exception:Error while deleting the record indexName - <index name>,
type - gatewayscopes, doc ID - <doc is> Message - Not Found".

This issue is resolved.


YAI-27162 (Fix 21)
The throttling counter does not reset after API Gateway is restarted.

The throttling counter in API Gateway does not reset and the API invocation
fails with the status code- 429, on restarting all the nodes.

This issue is resolved. Restart Terracotta servers after you apply the fix.

YAI-27027 (Fix 21)
API invocation fails with an error message 'HTTP/1.1 400 The endpoint reference
EPR) for the Operation not found.'

When a WSDL contains multiple bindings with different operations, then after
activation all bindings are activated although only one binding can be used.
During activation, API Gateway UI selects one endpoint and the selected endpoint
is activated. Invoking the API with the other endpoints fails with an error.

This issue is resolved.

YAI-26990 (Fix 21)
When validating an API specification, the JSON schema validation is not 
performed if the 'additionalProperties' field is used in the reference schema.

This issue is resolved.

YAI-26307 (Fix 21)
Unable to search for global policy descriptions with a dash '-' in them.

When there is a dash '-' in a global policy description, and if you search for
the same using the corresponding keyword, then the matching policies are not
returned as results.

This issue is resolved.

YAI-27086 (Fix 21)
Running an invalid migration command shows an incorrect error message.

When you run the following invalid command, 'migrate.bat datastore dstoreSrc'
instead of 'migrate.bat datastore -dstoreSrc', an incorrect error message
appears.

This issue is resolved.


YAI-27038 (Fix 21)
Token lifetime value does not reflect the value set in the local
authorization server.

When a new strategy is created, the default token lifetime value does not
reflect in the value set in the local authorization server.

This issue is resolved.

YAI-26892 (Fix 21)
Applications are not getting synchronized with Microgateway.

When you have enabled the Team support feature, the changes made to the 
applications in API Gateway are not getting synchronized with Microgateway.

This issue is resolved.

YAI-27609 (Fix 21)
Issue with the user experience.

The user experience of the API details page has been enhanced by:
1. Introducing pagination for easy and quick search of associated applications.
2. Showing the total count of the associated applications.
3. Sorting the associated applications list alphabetically.

This issue is resolved.

The user experience of the API details page has been enhanced by:
1. Introducing pagination for easy and quick search of associated applications.
2. Showing the total count of the associated applications.
3. Sorting the associated applications list alphabetically.

This issue is resolved.

YAI-26472 (Fix 21)
When you update the platform log settings, the server log levels are also
modified.

This issue is resolved.

YAI-27659 (Fix 21)
Scope-level policy not disabled when a global policy overrides it.

When a global policy overrides a scope-level policy, it is not indicated in the
API Gateway UI by disabling the service level policy action.

This issue is resolved.

YAI-27228 (Fix 21)
OAuth scope mapping details page takes time to load.

The OAuth scope mapping detail page takes a long time to appear when there are
large numbers of APIs.

This issue is resolved.

YAIC-3904 (Fix 20)
Cannot access swagger URL while creating a new API.

Trying to create a new API in API Gateway on cloud, using swagger URL from an
on-premise API Gateway instance, fails with an error “Unable to create an API as
the input openapi url is not reachable”. This happens as the HTTPS imports for
swagger and OpenAPI files did not use the configured keystore and truststore for
outbound connection.

This issue is resolved.

YAI-26933 (Fix 20)
A SOAP WSDL with nested schema is observed to generate different IDs for
subschemas.

On importing a SOAP API that has a WSDL with nested schema, it is observed to
generate different IDs for subschemas. This happens as a WSDL access with all
its referencing schemas is usually divided into multiple requests. However, when
the requests are distributed to different cluster members, through a load
balancer, the requests might fail.

This issue is resolved.

YAI-26514 (Fix 20)
Interacting with the synchronized application in a cross-data center environment
with hot-standby and teamwork configuration is not possible

In a hot-standby cross-data center combined with enabled teamwork
configuration, the synchronized application cannot be opened or edited or
deleted.

The issue is resolved.

YAI-26462 (Fix 20)
Virtual OData API returns a HTTP 200 response, even if the request is
unauthenticated.

When accessing the OData API with its endpoint in API Gateway, it returns a
HTTP 200 response, even if the request is unauthenticated, although
Identification & authorize policy is activated and effective. This happens as
API Gateway stores the OData API document together with the API. However, it
might happen that real data gets stored instead of the metadata.

This issue is resolved. The OData API must be newly imported to resolve the
problem.

YAI-26803 (Fix 20)
Unable to access API Gateway UI after editing ports in Command Central.

When API Gateway UI port configurations are edited in Command Central, then
after the next restart of API Gateway the UI is no longer accessible. Accessing
the UI in a browser results in an error message "HTTP Status 404 – The
requested resource [/apigatewayui] is not available".

This issue is resolved.

YAI-26762 (Fix 20)
Switching between strategies in the Authentication section on the applications
page resets the grant types.

In the Authentication section of any application, when you switch between
multiple strategies, the grant type checkboxes get reset in edit mode.

This issue is resolved.

YAI-26725 (Fix 20)
When you enable the Log invocation policy, the transaction events with the
"OUT" or "FAULT" messages are not sent to the configured destinations.

This issue is resolved.

YAI-26776 (Fix 20)
Error message appears when native service sends unzipped response.

When API Gateway is unable to process a request and does not send the request
to the native service the same has to be communicated to the client. If those
responses are in the gzip format, then an exception occurs when API Gateway
tries to unzip those responses. If such responses are not in the gzip format,
then API Gateway forwards them to the client as if the response header does not
contain the 'accept-encoding' variable.

This issue is resolved.

YAI-26940 (Fix 20)
Unable to use WSDL generated by API Gateway with Java "wsimport"

The value of the schema location attribute provided is incorrect for an API that
has a WSDL file that imports multiple XSD files.

The issue is resolved.


YAI-26900 (Fix 20)
Missing authorization headers are not logged as a policy violation event
for basic authentication

If Identify & Authorize Application policy is configured with HTTP Basic
Authentication and authorization headers are missing, it is not logged as a
policy violation event.

The issue is resolved.

To address this issue the property "Trigger policy violation event on missing
authorization header" is introduced. If this property is set to true, requests
without authorization headers are logged as a policy violation event.


YAI-26223 (Fix 19)
Transaction events are not masked properly in REST transformed APIs.

When you have enabled REST transformation for a SOAP API, and if you configure
the Data masking policy for the API by setting Apply for payload to 'true',
then the response payload in the transaction event is the same as the
request payload.

This issue is resolved.

YAI-26583 (Fix 19)
Creating a port through Command Central with Access mode deny setting fails.

This issue is resolved.

YAI-26029 (Fix 19)
If you have enabled schema validation and selected some XML features in the
Validate API Specification policy, then the "Feature is not recognized" error
message is included in the server.log file when APIs are invoked.

This issue is resolved. The only supported features are:
XMLSCHEMA_FULL_CHECKING
SCHEMA_AUGMENT_PSVI
GENERATE_SYNTHETIC_ANNOTATIONS
VALIDATE_ANNOTATIONS
NAMESPACE_GROWTH
TOLERATE_DUPLICATES
CONTINUE_AFTER_FATAL_ERROR
ALLOW_JAVA_ENCODINGS
STANDARD_URI_CONFORMANT_FEATURE
DISALLOW_DOCTYPE


YAI-26694 (Fix 19)
The script for generating a Dockerfile to remove unused OSGI bundle jars is
improved.

The issue is resolved.


YAIC-4372 (Fix 19)
Unable to create an OData API using HTTPS.

Creating an OData API with an HTTPS address fails if a self-signed certificate
is used for the truststore or keystore.

This issue is resolved.


YAI-26503 (Fix 19)
Vulnerable third party component kubernetes-client used.

Vulnerable third party components kubernetes-client is used in API Gateway.

This issue is resolved.
The components are now updated to version 4.13.2.


YAI-26429 (Fix 19)
APIs are disabled when API Gateway is shut down before the startup is completed.

In some cases, APIs are unintentionally disabled when API Gateway shutdown or
restart process is performed, before the startup process is completed.

This issue is resolved.


YAI-26674 (Fix 19)
Rollback takes longer than promotion

The rollback process always updates the alias, which consumes more time than the
promotion process if the alias was not updated.

The issue is resolved.


YAI-26569 (Fix 19)
UI inconsistency in the promotion management page

The "Select all" checkbox in the "Search by type" menu additionally selects the
admin configurations if the "Include admin configuration" option is selected,
which is incorrect.

The issue is resolved.


YAI-26548 (Fix 19)
Accessing the inner level JSON element through variables does not return valid
JSON.

When accessing an inner level JSON element in the response processing through
variable framework, then the value returned is not in the JSON format.

This issue is resolved.

YAI-26492 (Fix 19)
APIGateway removes SOAP headers in response.

When native SOAP service is sending SOAP headers in response that is intended for the client invoking the API, APIGateway removes the SOAP headers when sending the response back to client.

The issue is resolved.

YAI-26361 (Fix 19)
Vulnerable third party component esapi used.

Vulnerable third party components esapi jar is used in API Gateway.

This issue is resolved.
The components are now updated to version 2.4.0.0.


YAI-26408 (Fix 18)
Global search takes long time to return results.

When you provide a keyword in the Search field, multiple queries are sent to
the API Data Store to identify the field type for field names used in the
search. Due to this, the transaction takes a longer time to return search
results.

This issue is resolved.


YAI-25938 (Fix 18)
OData request not correctly URL-encoded.

When an API Gateway OData API is invoked with a URL containing a '+' (plus)
character correctly encoded as "%2B", then the corresponding backend service is
invoked with a literal '+' in the URL.

This issue is resolved.

YAI-25144 (Fix 18)
API name list is not refreshed when adding APIs to a new application.

The APIs list displayed, when found using the search facility, in the 'Selected
APIs' section is at times incorrectly displayed for newly created applications.

This issue is resolved.

YAI-24987 (Fix 18)
Duplicate applications created when application requested from API Portal.

When you create an application from API Portal by providing an existing
application name, a duplicate of the application is created instead of
registering the corresponding API to the same application.

This issue is resolved.

YAI-25584 (Fix 18)
If you version an API, and if you export the base version and import the same
then the versioned API is deactivated.

This issue is resolved.

YAI-25560 (Fix 18)
Unable to search global policies using their description.

When you search for a global policy using a keyword that is provided in the
policy description, then the search does not return the corresponding global
policy in the result.

This issue is resolved.

YAI-26392 (Fix 18)
A NullPointerException is observed while importing users, groups and access
profiles.

While importing users, groups or acess profiles, the import may fail and end
with a NullPointerException, which is logged in the server.log.

This issue is resolved.

YAI-26375 (Fix 18)
Vulnerable third party component keycloak used.

Vulnerable third party components keycloak-core-15.0.2.jar and
keycloak-adapter-core-15.0.2.jar are used in API Gateway.

This issue is resolved.
The components are now updated to version 18.0.2.

YAI-26313 (Fix 18)
Vulnerable third party component spring used.

Vulnerable third party components spring-core-5.3.18.jar and
spring-tx-5.3.18.jar are used in API Gateway.

This issue is resolved.
The components are now updated to version 5.3.22.

YAI-26284 (Fix 18)
Many 'ReportProcessor' error messages appear in the server.log.

When 'Report performance data' is disabled for destinations, such as,
API Gateway or Database, error messages like the following appear in the
server.log: "[YAI.0206.0056E] ReportProcessor found invalid policy type". It is
observed that when you set the publish interval to a small value (say 1 minute)
before disabling the destinations, the error messages appear once a minute.

This issue is resolved.

YAI-26207 (Fix 18)
Log entries that indicate errors are made when starting and stopping
API Gateway.

The issue is resolved.

YAI-26139 (Fix 18)
Log entries are not added when the identification and authorization of
applications are performed using APIKey.

This issue is resolved.

YAI-26126 (Fix 18)
Performance issues observed while updating global polices for many Soap APIs.

When updating a global policy that affects a large number of Soap APIs, the
update can take a long time.

This issue is resolved by improving the performance while updating Soap APIs.

YAI-26076 (Fix 18)
Memory Leaks in API Gateway on hot deploy of Soap APIs

API Gateway has memory leaks when redeploying active Soap APIs. The heap memory
usage increases with every redeployment or update of an active Soap API.

This issue is resolved.

YAI-25943 (Fix 18)
Importing schema fails while retrieving WSDLs.

Importing a schema might fail when you use a load balancer for retrieving WSDLs
and the load balancer distributes the requests among multiple nodes.

This issue is resolved.

YAI-25479 (Fix 18)
Security vulnerability identified in Moment.js library.

To enhance security, the third-party library, 'Moment.js' is upgraded to a
safer version.

This issue is resolved.

YAI-26365 (Fix 18)
Unable to use WSDL file generated by API Gateway

For an API that has a WSDL file that imports other WSDL files, the value of the 
provided location attribute is incorrect.

The issue is resolved.


YAI-26385 (Fix 18)
The quotes are not encoded.

When a query parameter is added using request transformation and if the query 
parameter has a quote character, it is not encoded when the query is sent to 
the native service.

This issue is resolved. 

YAI-26262 (Fix 18)
OAuth2 remote introspection is performed twice.

When an external authorization server is configured for remote introspection 
and if an opaque token is received during the runtime, then the remote 
introspection is performed twice.

This issue is resolved. 

YAI-26192  (Fix 18)
Unable to download the WSDL zip file after importing an API

After importing a SOAP API that includes multiple XSDs, the generated WSDL
zip file cannot be downloaded. The Download zip button in the API Gateway UI
does not work, and there are no error messages displayed.

The issue is resolved.

YAI-26065 (Fix 18)
Global search takes long time to return results.

When you provide a keyword in the Search field, multiple queries are sent to
the API Data Store to identify the field type for field names used in the
search. Due to this, the transaction takes a longer time to return search
results.

This issue is resolved.

YAI-25856 (Fix 18)
Transaction log entries are not included for 202 and 204 response codes.

When you have enabled the logging policy, and if you invoke a SOAP API and the
native API returns 202 or 204 as a response then the transactional logs are not
included in the destinations specified in the Log invocation policy.

This issue is resolved.

YAI-25897 (Fix 17)
when request/response schema has a enumeration of type integer. Schema validation only checks 
the if the type matches and fails to check if the values in the request/response is one 
of the possible values of enumeration.

This issue has been fixed.

YAI-25707 (Fix 17)
When a JSON request to a SOAP-enabled API contains null values, then the
converted SOAP request sent to the native API also contains the null value as
text.

For example,
JSON Request:
{ "Key": null }

Converted SOAP request:

<Key>null</Key>

This issue is resolved.

You can set the new extended setting 'pg.soapToRest.addNilAttribute' to 'true'
to add null attribute to converted SOAP requests.

Sample SOAP request with the added null attribute:

<Key xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true/>

Note: The default value of the new extended setting is 'false'.

YAI-25889 (Fix 17)
Mocked API does not return a proper response.

When mocking is enabled for an API and the Accept header from the client has 
the "q" parameter, then the mocked response is not sent to the client properly.

The issue is resolved. 

YAI-25740 (Fix 17)
A grants table inside the LeasedBasedCacheServer was growing unexpectedly. This issue is fixed.

YAIC-4201 (Fix 17)
When using a third-party authentication server for OAuth2 token validation, if 
the "client_id" value is sent in the "appid" claim of JWT then the runtime 
invocation fails during the 'client_id' validation.

This issue is resolved. API Gateway now considers the "appid" claim in JWT for 
the client_id validation.

YAI-25768 (Fix 17)
When using a third-party authentication server for OAuth2 token validation, if 
the scope is sent in the "roles" claim of JWT then the runtime invocation fails
during scope validation.

This issue is resolved. API Gateway now supports the scope mapping of the 
"roles" claim in JWT when validating OAuth2 access token.

YAI-25821 (Fix 17)
API Gateway logs port configuration data that might include password information.

API Gateway is logging port manager configuration data, which might also
include passwords in the default Info logging level.

This issue is resolved.

YAI-25833 (Fix 17)
An error occurs while deleting temp files and folders.

In a cluster environment or in a single node environment, conflicts could
occur on temporary folders with content. This means that one action deletes the
others content, which might result in a FileNotFoundException.

This issue is resolved.

YAI-25257 (Fix 17)
Swagger and the open API JSON files include unexpected endpoints.

When you publish a REST API to API Portal, the URL endpoints that appear in the
generated swagger file and the open API JSON files of API Portal attachments
are not as expected.

This issue is resolved.

YAI-25728 (Fix 17)
API Mashups list does not display the correct name of the resources that have
large resource names.

In the API Mashups -> List of resources page, it is observed that resource names
are truncated if the name exceeds 25 characters. Hovering over the truncated
name does not display the full name making it difficult to identify the resource.

This issue is resolved. The truncation of resource names is removed.

YAI-25360 (Fix 17)
Add the fixes audit.log to the diagnostic logs for API Gateway to help investigate customer issues.

This issue is resolved.

YAI-25313 (Fix 17)
The refresh button on the global analytics overview page does not refresh the page verified with latest fix 15 of version 10.7 and the issue can be demonstrated by Global support.

The issue is data is not refreshed when the filter is selected as last 15 minutes, all others work fine.

YAI-25800 (Fix 17)
The swagger specification generated for policy management API has improper request and response definitions.

The issue is resolved.

YAI-25773 (Fix 17)
Validate API Specification policy does not validate query parameters with
encoded characters.

When you enforce Validate API Specification policy for an API, and if the query
parameter contains an encoded character then the validation of the query
parameter with the API specification fails.

The issue is resolved.

YAI-25667 (Fix 17)
API Gateway ports with bind addresses are incorrectly displayed in the
API Gateway UI.

When a bind address is added for a port in the API Gateway UI, the bind address
information is not saved and is incorrectly displayed in the API Gateway UI.

This issue is resolved.

YAI-25521 (Fix 17)
Response header parameter not included in the exported API specification.

The exported Swagger or Open API documentation of an API does not include the
defined response header parameter.

This issue is resolved.

YAI-25384 (Fix 17)
Unable to sort promotions by time.

This issue is resolved. A new extended setting 'promotionListSortByTime' is
added to allow you to sort the promotions by time. Set the extended setting to
'true' to enable this feature.

YAI-25060 (Fix 17)

Namespace not added to applicable elements in native request payload of
REST transformed SOAP API.

If you invoke a REST transformed SOAP API, then the request payload sent
to native service does not add appropriate namespaces for applicable elements
and attributes.

This issue is resolved.


YAI-25545 (Fix 17)
Cookies header from mashed-up API is not included in response sent to invoking
client.

If the last steps of an mashed-up API response have cookies header, then that
header is not sent to the invoking client.

This issue is resolved.

YAI-25187 (Fix 17)
Unable to activate Websocket APIs enforced with Traffic Optimization policy.

When you add a Traffic Optimization policy to a Websocket API, that API
could not be activated.

This issue is resolved.


YAI-25229 (Fix 17)
API key / Passman error after importing or promoting an application.

API Gateway generates a new API key when:

* API Gateway is unable to decrypt the API key of an imported application, or
* The Passman data of API key is corrupted or the master password in the current
    environment is different.

An entry is added to the import log if the Passman data of the API key is
corrupted; and an entry is added to the audit log if the API key is regenerated
during the import of an application.


YAI-25564 (Fix 17)

The reason for the error is that the new CLIENT_REGISTRATION object is not present in the local cache of the secondary nodes of the cluster

The CLIENT_REGISTRATION cache is switching to small unbounded which means that when a cache miss happens it will not fetch from the ES.

So now when a strategy is created in one node , In the notify create call of all secondary nodes we load the created CLIENT_REGISTRATION object to the local cache.

YAI-25504 (Fix 17)

The password expiry setting configured for a user is not deleted when the user
is deleted from API Gateway.

When you configure the Password expiry setting for a user and if you delete
the user account, the corresponding password expiry setting is not removed.

The issue is resolved.

YAI-25382 (Fix 17)
Updating truststore with another file and password fails.

After updating an existing truststore with a new truststore file and another
password, the truststore is loaded. When this API Gateway node is restarted,
the updated truststore is shown as not loaded in the Integration Server UI.
It is also observed that the new truststore is not loaded on the cluster nodes
as well.

This issue is resolved.


YAI-25512 (Fix 17)
Promoting assets takes a long time.

Promoting a large set of APIs is observed to take a very long time. This
drawback is on the target side with regards to managing the data to be imported.

This issue is resolved. Now, this procedure is optimized.

YAI-25524 (Fix 17)
Search with multiple keywords in API Gateway UI fails.

When searching with multiple keywords using the pipe symbol (|)
in Promotion Management in API Gateway UI, does not always return all results.

This issue is resolved.

YAI-25227 (Fix 17)
Unable to log on to API Gateway sometimes when you have enabled SSO. 

When you have enabled SSO, the API Gateway login fails sporadically. The 
CredentialsExpiredException entry is added in the sag-osgi.log file during 
such instances.

The issue is resolved. 

YAI-25467 (Fix 17)
Sub-facilities in logging level of API Gateway were overwritten when restarting Integration Server.
This issue is resolved.


YAI-25456 (Fix 17)
Unable to restore indexes with same prefix name.

When you restore a backup file with the 'aggregate' parameter and if you 
provide index names with same prefix, then the restore fails. For example, 
'gateway_default_analytics_errorevents-000001' and 
'gateway_default_analytics_errorevents-000002'.

This issue is resolved.

YAIC-4054 (Fix 17)
Problems observed during import and export of Authentication Server Alias.

While importing the Authentication Server Alias from an invalid export copy a
"Import completed" message displays and a blank report is generated. It is
observed that a wrong export gets generated even though keystore and truststore
configuration does not exist. This happens as while deleting keystores and
truststores it is not checked if they are referenced by Authentication Server
Aliases. Also, the report generated just says "Alias" as Type without giving any
details about the type of alias.

These issues are resolved.
Now, when deleting keystores and truststores there is a check if they are
referenced by Authentication Server Aliases.

YAI-25439 (Fix 17)
Accessing the JWT claims through variables does not return JSON.

When accessing a JWT claim from the authorization header through variable 
framework the value returned is not in the JSON format.

The issue is resolved.


YAI-25449 (Fix 17)
Accessing the JWT claims through variables does not return JSON.

When accessing a JWT claim from the authorization header through variable 
framework the value returned is not in the JSON format.

The issue is resolved.

YAI-25444 (Fix 17) 
Scopes are not created properly when importing an application.

When you import an application that has OAuth2 strategy with scopes, and the 
scopes are not present in the authorization server, then the new scopes are not 
created properly in API Gateway

The issue is resolved.

YAI-25429 (Fix 17)
Export of API Portal communication is not possible in API Gateway UI.

You can not export API Portal communication to an archive through the
API Gateway UI

This issue is resolved.

YAIC-4083 (Fix 16)
Timeout exception occurs as API Gateway forwards the Content-Length header to
Native Service for a GET method.

This issue is resolved by removing the Content-Length header for GET method.

YAI-25396 (Fix 16)
Unable to export API Portal configurations with a GET request on an archived
resource.

This issue is resolved.

YAI-25307 (Fix 16)
After deactivating the package, the IAM policy associated to API is deleted some times.
 
If an API associated to a package, when the package is deactivated the IAM policy associated to 
the API is deleted.

This issue is now resolved.

YAI-24711 (Fix 16)
When changing the API Access Key on a secondary node of a Cross DC setup, the Key is not saved at the primary node.
This issue is resolved.

YAI-25278 (Fix 16)
The Search REST API always responds with "isActive": false irrespective of the
API state.

Using the REST API to search for APIs, the field isActive always responds as
false, irrespective whether the APIs are active or not.

This issue is resolved.

YAI-25194 (Fix 16)
Updating aliases in a cluster environment leads to a memory spike.

Updating aliases in a cluster environment might lead to an error in cluster
synchronization. When such an error occurs multiple times, it might lead to a
memory spike as the occupied memory is not released.

This issue is resolved.

YAI-25019 (Fix 16)
API Gateway is unable to store strings in JDBC destination.
 
If the string byte length of configured events is greater than the length
configured for fields in DB Schema, then API Gateway is unable to store strings
in JDBC destination.

This issue is resolved.

YAI-25238 (Fix 16)
Not able to migrate the analytics index containing large string as value.
 
For the fresh installation this issue will be resolved as the mapping will be updated automatically.

If the customer install as fix, they need to do a rollover for analytics event to avoid this issue.

This issue is fixed now.  


YAI-20216 (Fix 16)
External HTTP Port reported as created when it isn't

After try to create an external HTTP with the API Gateway UI,
using a port as registration port which is already
occupied on the PC, API Gateway displays a popup message
"Port Created Successfully". But the port is not created.

This issue is resolved. API Gateway now shows an error message
with the information why the Port cannot be created.

YAI-25205 (Fix 16)
Saving Custom destination with a variable framework syntax like
${request.payload.jsonPath[]} fails.

This issue is resolved.


YAI-25042 (Fix 16)
SOAP API activation fails, if you create the API using a WSDL file that has
multiple endpoints.

This issue is resolved.

YAI-24774 (Fix 16)
Unable to navigate to an application details page using application Id.

When you view an application details page, and if you provide some other
application ID in the browser URL and press Enter, the corresponding application
does not appear.

This issue is resolved.


YAI-24783 (Fix 16)
Unable to search for fields whose type is 'keyword'.

If you search for a field that is saved as 'keyword' type in Elasticsearch
using the Search API option, then the system does not return the corresponding
results.

This issue is resolved. If the type is not 'text', then you must provide the
exact value of the field that you are searching for.

YAI-22309 (Fix 16)
Application de-registration from Developer Portal is not updated in API Gateway.

When you remove multiple APIs from an application in Developer Portal, the 
corresponding application and the API association are not updated properly in 
API Gateway.

The issue is resolved.

YAI-24463 (Fix 16)
A library change for converting an XML payload to JSON format creates a mismatch
in the converted data type.

When you convert an XML payload to JSON format, the old library converts the
data to a 'string' data type. Whereas, the new library converts the data to the
respective data type. To overcome this behavior, the following extended setting
is introduced: 'xmlToJSONConversion_keepString'. The default value of the
extended setting is 'true'.

When you set this property to 'true', the data type of the converted fields is
'string'. If it is 'false', the data type of the converted fields changes to the
respective data type.

Sample XML Payload:

<?xml version="1.0" encoding="UTF-8"?>
<EmployeeDetail>
<ID>12345</ID>
<Name>John</Name>
<Address>999 ABC Street</Address>
</EmployeeDetail>

Following is the response if the extended setting is set to 'true':
{
"EmployeeDetail":
{
"ID": "12345",
"Name": "John",
"Address": "999 ABC Street"
 }
}
All fields in the response payload is a 'string' datatype.

Following is the response if the extended setting is set to 'false':
{
"EmployeeDetail":
{
"ID": 12345,
"Name": "John",
"Address": "999 ABC Street"
}
}
The Data type of the field 'ID' is an integer.

This issue is resolved.

YAI-24899 (Fix 16)
Local introspection fails on scope validation.

With a JWT token, local introspection fails when the access tokens created from
an external provider contains contains 'scopes' and not 'scope'. This happens as
API Gateway supports only the claims 'scope' and 'scp'.

Tis issue is resolved. Now, API Gateway additionally supports the claims
'scopes'.


YAI-24943 (Fix 16)
Health check response 200 OK is received even before the API is activated.

When using /rest/apigateway/health to check the accessibility of the port, it is
observed that a response with status 200 OK is received even before the API is
activated.

This issue is resolved.
The /rest/apigateway/health/engine request is now modified so that it only
returns 200 when all APIs are activated after startup.

YAI-23431 (Fix 16)
The Column with the type 'timestamp' is missing in the 'AGW_EVENT_AUDITLOGS'
table.

API Gateway creates the following table 'AGW_EVENT_AUDITLOGS' to store the audit
logs. Since the Column with type 'timestamp' is missed in the table, the
partitioning of the table is not possible.

This issue is resolved by creating a new column 'EVENT_CREATE_TS' of type
'TIMESTAMP' in the 'AGW_EVENT_AUDITLOGS' table.


YAI-23222 (Fix 15)
Updation of existing API with Swagger file causes issues with runtime invocation
of that API.

When you update an existing API with a swagger file, the runtime invocation
after the update fails sporadically with the following exception:

'java.lang.ClassCastException: com.softwareag.apigateway.api.model.rest.openapi.
parameter.Parameter cannot be cast to com.softwareag.apigateway.api.model.rest.
QueryParameter.'

This issue is resolved. 	

YAI-24697 (Fix 15)
When you create an API by importing a JSON file that contains the 
"additionalProperties" field, and generate a swagger file for the API in 
API Gateway, then the generated file does not contain the field.

This issue is resolved.

YAI-23069 (Fix 15)
Unable to clone global policy using the 'Policies' REST API.

This issue is now resolved.

YAI-24328 (Fix 15)
Rolled over indexes are not migrated as separate indexes. 

When you roll over some of the indexes and if you migrate them to a higher 
version, all indexes of an alias migrate to target as a single index.

This issue is resolved. If the index alias specified in source have multiple 
rolled over indexes, then all those indexes are migrated to target as separate 
indexes by replacing the tenant name and added to target index aliases as 
read-only indexes.

YAI-24701 (Fix 15)
Conditions specified in the custom extension policy are not honored.

When you specify a condition in the custom extension policy for a SOAP API, 
the condition is not honored when invoking the API during runtime.

This issue is resolved. 

YAI-24252 (Fix 15)
Unable to search for a scope by entering its description in the 'Search by 
keyword' field.

This issue is resolved.

YAIC-3808 (Fix 15)
Unable to save API after deleting the last resource from the API scope.

When you delete the last resource from the scope of an API and save the API,
the API is not saved.

This issue is resolved.

YAI-23913 (Fix 15)
Application for unregistered APIs.

When the Register application approval flow is configured and if you request 
access token for an API that is not registered then an application is published 
to the portal without the API link. 

This issue is resolved.

YAI-24569 (Fix 15)
During request transformation, if JSON payload is converted to XML, then the 
content-based routing does not work properly for XPath and JSON path.

This issue is resolved.

YAI-24666 (Fix 15)
Unable to invoke APIs with configured URL aliases.

If you configure an API's endpoint with an URL alias without having the version 
information, then the runtime invoke of the API fails.

This issue is resolved.

YAI-24475 (Fix 15)
The swagger specification generated for service management API has improper API
response definitions.

The issue is resolved.

YAI-24617 (Fix 15)
When there are HTTP header values in an application and if you remove or edit 
them and update the application, then the values do not appear properly in UI.

The issue is resolved. 

YAI-24004 (Fix 15)
JWT claims are not generated when you subscribe to a plan from API Portal.

When you subscribe to a plan from API Portal, the application created in 
API Gateway does not include the default JWT claims.

The issue is resolved.

YAI-24547 (Fix 15)
Response for a REST transformation enabled SOAP API is not proper.

When the native API is sending a SOAP response which has blank spaces, then 
API Gateway transforms the blank spaces to JSON objects when performing the REST 
conversion .

The issue is resolved. A new pg property, pg.soapToRest.removeWhitespaces, if 
set to true, then allows you to specify whether the empty lines between SOAP 
response must be removed before performing the REST transformation. The value 
is true by default.

YAI-24537 (Fix 15)
Import user fails with a NullPointerException.

When trying to import a user that already exists in API Gateway with the same
name but a different id, and Import Overwrite option is not selected, the
operation fails with a NullPointerException.

This issue is resolved.

YAI-24208 (Fix 15)
Port configurations lost during port update.

When you update an external port with a registration port through the
API Gateway UI, and the registration port is enabled during the update, the
registration port gets removed on updating the port.

This issue is resolved.
The registration ports are now disabled before the update and have to be enabled
again manually after the update.

YAI-24527 (Fix 15)
API Gateway fails to start after a fix installation.

API Gateway fails to start after installing API Gateway 10.5 Fix23 or 10.7 Fix14.
In the Integration Server Administration UI the API Gateway package appears as
partially loaded. This happens only if the connection to Elasticsearch is
protected by SSL, for example, if the SearchGuard plugin is enabled in
Elasticsearch.

This issue is resolved.

YAI-24263 (Fix 15)
Responses from API Gateway slow down when retrieving OAuth2 access tokens.

API Gateway slows down in responding when OAuth2 access tokens are 
retrieved using the pub.apigateway.oauth2:getAccessToken service.

The issue is resolved. 

YAI-24021 (Fix 15)
Unable to log on to API Gateway sometimes when you have enabled SSO.

When you have enabled SSO, the API Gateway login fails sporadically.

The issue is resolved.

YAI-24385 (Fix 15)
Unable to update the payload for a REST transformed API in the Conditional 
Error Processing policy.

When you enforce Conditional Error Processing policy for a REST transformed 
enabled SOAP API and configure Invoke webMethods IS to update the payload 
during the post-processing step, the response sent to the client does not 
include the updated payload.

The issue is resolved.

YAI-24454 (Fix 15)
An exception is observed when there is a broken Schema reference while loading
the WSDL.

A WSDL downloaded from an API Gateway SOAP API contains a broken schema
reference. When feeding the WSDL into SOAP tooling an
org.apache.xmlbeans.XmlException is reported. This happens if the schema
reference is in the "wsdl:types/xsd:schema/xsd:include" section of the WSDL.

This issue is resolved.

YAI-24447 (Fix 15)
Security vulnerability identified in Moment.js library.

To enhance the security, the 'Moment.js' library is upgraded to a safer version.

This issue is resolved.

YAIC-3822 (Fix 15)
Configured values change in 'Alert settings' tab of 'Threat Protection' policy
in API Gateway Cloud.

In API Gateway Cloud, when you restart API Gateway, the values that are
configured in the 'Alert settings' tab of 'Threat protection' policy page
reverts back to 'default' values.

This issue is resolved.

YAI-24125 (Fix 15)
When the API Gateway analytics page is loaded, '404' error is displayed in the
browser console as one of the network calls fails.

This issue is resolved.

YAIC-3863 (Fix 15)
Error appears during the invoke of API that uses simple alias in its 
Straight Through Routing policy.

When you create a simple alias with a period (.) in the name and use the alias 
in the Straight Through Routing policy, an error appears in the response 
when invoking the API.

The issue is resolved. 

YAI-24285 (Fix 15)
Missing Authorization Header in the response sent by API Gateway to the client.

The Authorization Header that is present in the native API response is found
missing in the response sent to the client.

This issue is resolved.

YAI-23628 (Fix 15)
Incorrect API appears when you access disabled API.

When there are two versions of a SOAP API, if you disable one of them and if
you access the disabled API's endpoints then the existing API appears.

This issue is resolved.

YAI-23850 (Fix 15)
Transaction events are not masked properly in REST transformed APIs.

When you have enabled REST transformation for a SOAP API, and if you configure
the data masking policy for the API by setting transaction logging to 'true', 
then the native service request in the transaction event is not masked. 

Note: To mask the data in the transaction event of REST transformed APIs, you 
must specify the XPath of the native request SOAP payload.

The issue is resolved.

YAI-24237 (Fix 15)
Error message logged when webMethods IS Service is invoked through a request 
transformation policy.

An error message and stacktrace logs are added to the server.log file, whenever
the webMethods IS Service is invoked.

The issue is resolved.

YAI-23357 (Fix 15)
API validation failure.

API validation for the query parameter does not work when the schema is
referenced to the parameter object.

This issue is resolved.

YAI-24248 (Fix 15)
Description text does not appear in the WSDL for a SOAP API.

If a SOAP API has a description text, then the description text does not appear
in the WSDL under documentation tag for the API.

This issue is resolved.
The description text now appears in the WSDL for the API.

YAI-24142 (Fix 14)
Importing an archive with a missing API is not handled gracefully.

When importing an archive, which has an API declared in the
APIGatewayAssets.acdl but is missing in the archive ZIP file, the import ends
with a message dialog box "Importing an archive failed. Internal Server Error"
being displayed.

This issue is resolved. The import report is now created with the information
that the API was not found in the ACDL file.

YAI-24189 (Fix 14)
Error when you use the pub.oauth:removeExpiredAccessTokens service.

When the number of expired OAuth2 token is huge and if you remove the expired 
tokens using the pub.oauth:removeExpiredAccessTokens service, then an error 
message appears.

The issue is resolved.

YAI-24182 (Fix 14)
API Gateway takes a very long time to start up and Kibana does not start.

When there are a large number of OAuth2 scopes in API Gateway, it takes a very 
long time to start up and Kibana does not start.

This issue is resolved.

YAI-24225 (Fix 14)
Authorization server scope descriptions are not meaningful for APIs published 
from CentraSite.

When the pg_oauth2_createDefaultScopes extended setting is set to true, and 
an API is published from CentraSite then the description displayed for the 
scopes created in the local authorization server are not meaningful.

The issue is resolved.

YAI-23760 (Fix 14)
Unable to download OpenAPI Swagger and RAML definitions.

In some cases, the Swagger 2.0 or RAML 0.8 definitions of an OpenAPI 3.0 based
API are not visible.

This issue is resolved.

YAI-24159 (Fix 14)
API Gateway does not return Cache-Control header for WSDL files.

When fetching a WSDL from API Gateway using a HTTP call, the Cache-Control
response header is not set.

This issue is resolved.

YAI-23780 (Fix 14)
XML schemas that are required for schema validation of APIs are not preloaded 
during the startup or deployment in Mediator. As a result, the first invocation
of APIs take longer duration.

This issue is resolved. The "pg.schema.cacheOnDeploy" extended setting is added 
to API Gateway from Mediator. The available options are:

True. If an API has the Validate API Specification policy with Schema enabled 
then the schema is loaded in the memory during API activation.
False. The schema is loaded during the first invocation of API.
The default value of this setting is false.

YAI-23523 (Fix 14)
Boolean values in JSON responses of REST transformed APIs not converted.

When you enable SOAP To REST transformation for a SOAP API, and if you make a
REST call to the API then the 'boolean' values in the JSON response are not
converted as 'string' values.

This issue is resolved.

YAI-23939 (Fix 14)
Diagnostic port is reset to the original version on API Gateway restart.

After deleting the default diagnostic port and creating a new diagnostic port,
the old diagnostic port is recreated after the restart of API Gateway.

This issue is resolved.

YAI-24129 (Fix 14)
Unable to update keystore alias passwords.

After updating an existing loaded keystore with new alias passwords in
API Gateway UI, the keystore displays an error in Integration Server after
reloading it due to an incorrect key alias password of the keystore.

This issue is resolved.

YAI-23485 (Fix 14)
Error message appears when migrating applications from 10.3 API Gateway.

When you migrate applications from API Gateway 10.3, the JsonMappingException 
error appears in the migration log.

The issue is resolved.	

YAI-24025 (Fix 14)
SOAP headers mapping issue.

During SOAP to REST transformation, the SOAP headers are retrieved from the 
WSDL specification of the API. When you invoke a REST API, that is transformed 
from SOAP, the values for these headers are mapped from the path, query, or 
header parameters of the input REST payload. During such scenario, the unmapped 
SOAP Headers are removed when sending the request to the native SOAP API.

This issue is resolved.

Note: Use XPaths that are relative from the SOAP envelope. Refer the example:

//soap:header/headerValue and not /soap:envelope/soap:header/headerValue

YAI-24056 (Fix 14)
API Gateway does not start up.

When you start API Gateway from Integration Server, the null pointer exception 
message appears during the synchronization of data from Passman to Integration 
Server.

This issue is resolved.

YAI-24047 (Fix 14)
When CentraSite deploys a virtual service together with an application, and
API Gateway has applications with the same name, then the API is associated with
all the applications.

The issue is resolved. Only the deployed virtual service gets associated with
the API.

YAI-24093 (Fix 14)
API Gateway takes very long time to start up.

When there are large number of Passman handles to be synchronized to 
Integration Server, API Gateway takes very long time to start up.

This issue is resolved.

YAI-23892 (Fix 14)
API callback is not working.

API callback is not working if the value of the callback URL has JSON path 
expression.
The issue is resolved.

YAI-23994 (Fix 14)
When a swagger file contains external references, then API Gateway throws an
exception when you publish a virtual service from CentraSite to API Gateway. An
exception can occur during API Gateway import or CentraSite deployment.

YAI-23839 (Fix 14)
Unable to invoke APIs enforced with Basic Authentication and Allow Anonymous 
set to true in the IAM policy.

When you enforce Basic Authentication identification with registered 
application for an API, and set the Allow Anonymous option to true, and if the 
client does not send any password in the basic authorization header then the 
application is not identified.

The issue is resolved.

YAI-23491 (Fix 13)
API tags are not updated when editing APIs.

When you edit an API using a file or URL, and if there are any modifications in
the API tags then the changes are not reflected in the updated API.

This issue is resolved.

YAI-21803 (Fix 13)
Users are incorrectly redirected to the API Gateway home page.

If you have the Manage general administration configurations privilege only and
if you try to navigate to any tab other than General, API Gateway redirects you
to its home page

This issue is resolved. Now the Administration screen displays tab based on the
privilege assigned for the logged in user.

YAI-23137 (Fix 13)
Re-importing application with OAuth strategy refreshes the client ID and secret.

When an application is created with OAuth strategy and if it is re-imported then
a new client ID and secret is generated by mistake instead of using the existing
client ID and secret in the exported archive.

This issue is resolved.

YAI-23376 (Fix 13)
Analytics data not displayed for applications with a name that contains
double-byte characters.

When an application name contains double-byte characters, and if you select the
the application name from the Analytics screen, then the analytics data does
not appear.

This issue is resolved.

YAI-23438 (Fix 13)
Typehead search issue in the Policies section.

The 'Typeahead' feature in the fields of the Policy Template and Global Policy
pages are not working as expected.

This issue is resolved. The Typeahead search results will be:

Combination of all 'api_types' in the Policy Template page.
Displayed based on the 'api_type' filter in the Global Policy page.

YAI-23246 (Fix 13)
Deactivation of publishing of events and performance metrics data to database
destination fails.

API Gateway continues to publish the events and performance metrics data to
database (DB2, Oracle, SQL Server) destination even after disabling the
following database option from title bar menu > Administration > Destinations.

This issue is resolved now.

YAI-22772 (Fix 13)
Port import fails in API Gateway

Unable to import ports in API Gateway. The ports are displayed in the
API Gateway UI, but they are not created in Integration Server.

This issue is resolved.

YAIC-3692 (Fix 13)
Incorrect functioning of the OPTIONS method in REST APIs.

When you set the "isStrictResourceMatching" extended setting to 'false', the 
OPTIONS method does not work as expected.

This issue is resolved.

YAI-23758 (Fix 13)
Unable to invoke IS services using the Custom destination option.

The Null pointer exception error appears when you invoke an IS service using 
the custom destination option.

This issue is resolved.

YAIC-3636 (Fix 13)
API Gateway search operation takes more time to fetch the data in the cloud.

In API Gateway Cloud, the global search and advanced search takes a longer time
to retrieve and display the data.

This issue is resolved.

YAI-23400 (Fix 13)
When you set the extended settings parameter from wsdlPortLayout to
service-single, then only one port entry is exposed for an endpoint.

The issue is resolved.

YAI-22863 (Fix 13)
When you sort the runtime events in the Analytics page using the apiName,
an error is displayed.

The issue is resolved.

YAI-23406 (Fix 13)
When the data type of header parameters are updated, the latest changes are not
reflected in the index templates properly.

This issue is resolved.

YAIC-3640 (Fix 13)
OAuth2 token removal is not reflected in all cluster nodes.

When API Gateway is clustered, and when you remove an OAuth2 token from one of
the internal authorization servers, then the removal is not reflected in other
nodes of the cluster.

The issue is resolved.

YAI-23712 (Fix 13)
WSS security elements are not generated in the outbound call to native API.

When you enforce Outbound Message Security policy for an API whose WSDL has a
PolicyReference element inside a Policy element then the outbound call to the
native API does not contain WSS security elements.

The issue is resolved.

YAI-23169 (Fix 13)
Team filter is not working for users in the Administrators team

If the logged in user is part of Administrators team, then the Team filter in
the API details page is not working.

This issue is resolved.

YAI-22956 (Fix 13)
When we connect default kibana to an external Elasticsearch for analytics, while
the core configuration is stored in the API Gateway Data Store itself., error 
popups displayed in the dashboard, and no data / charts are visible.

Now we have prepared a postman collection to fix this issue and given the 
modified steps to connect default kibana to external Elasticsearch.

YAI-23540 (Fix 13)
- Readme text is not found --

YAI-23213 (Fix 13)
Updating APIs with a large number of methods consumes a lot of time.

This issue is resolved. Changes are made to improve the performance of API
design time updates.

YAI-21864 (Fix 13)
- Readme text is not found --

YAI-23355 (Fix 13)
The cli/bin .sh scripts did not support the JRE_HOME environment variable.

The issue is resolved.

YAI-23131 (Fix 13)
API specification validation failure.

If the query parameter has multiple values then the API specification
validation fails for query parameters.

This issue is resolved.

YAI-23484 (Fix 13)
Incorrect statue code set for mocking conditions.

When you create multiple mock conditions, the status code is not correctly
set for some of the conditions.

This issue is resolved.

YAI-23153 (Fix 13)
Transactional events are not published to Custom Destination after API Gateway
restarts.

The Transactional events that are configured for publishing to Custom
Destinations are lost when API Gateway restarts.

This issue is resolved.

YAI-23907 (Fix 12)
Identified third party Log4j 2.16.0, which have known security vulnerability
CVE-2021-45105.

The issue is resolved. All Log4j libraries are updated to version 2.17.1.

YAI-23738 (Fix 10)
Identified third party Log4j 2.13.3, which have known security vulnerability 
CVE-2021-44228

The issue is resolved. All Log4j libraries are updated to version 2.16.0.

YAI-21520 (Fix 7)
Importing an existing application by a non-Administrator user fails.

When a user with 'Import assets' and 'Manage applications' privileges imports an
application that is available on API Gateway, the operation fails with an error
message stating that the user is not allowed to perform the import.

This issue is resolved.

YAI-21521 (Fix 7)
Unable to migrate API Gateway if the target or source API Gateway
Elasticsearch is secured.

If the source API Gateway is secured, the target API Gateway is unable to
migrate. This is because API Gateway does not honor the
"pg.gateway.elasticsearch.https.enforce.hostname.verification" property in
source config.properties. However, if the target API Gateway is secured, and
if you try to migrate, API Gateway is unable to migrate because of null pointer
exception during the creation of Elasticsearch client internally.

This issue is resolved.


YAI-22161 (Fix 7)
The server log displays a wrong error message during delete API.

In an API Gateway cluster, when an API is deleted, one of the servers correctly
performs the delete operation, while the server log of the other cluster servers
incorrectly displays the error message "Exception:Error while deleting the
record indexName - <index name>, type - oauth2scopes, doc ID - <doc is>
Message - Not Found".

This issue is resolved.

YAI-22168 (Fix 7)
Unable to create subscription with same name from portal.

This issue is resolved. You can now use the same subscription
name to subscribe different package and plan. Each subscription is created
as a new application in API Gateway.


YAI-22170 (Fix 7)
API Gateway displays error message when generating credentials for an existing
strategy.

When you generate client ID and client secret (dynamic client registration) for
an existing strategy in an application, API Gateway displays an error message.
Similarly, when you remove the generated client ID and client secret from an
existing strategy, API Gateway displays an error message.

These issues are resolved. Now, API Gateway allows you to generate a new client
ID and client secret for an existing strategy. However, once the credentials are
generated for a strategy, it can no longer be removed. The
"Generate credentials" toggle is disabled in the UI when you update a strategy.

YAI-22390 (Fix 7)
Unable to mock SOAP APIs that are transformed to REST.

When API Mocking is enabled, and if you enable REST transformation for SOAP API
the API mocking does not work for the REST service.

This issue is resolved.

YAI-22412 (Fix 7)
API key option is not removed from IAM of an API after deactivating the package

When you associate an API and a package and activate, the package adds new
IAM policy with API key if IAM policy does not exist in the API. If IAM policy
exists, package changes logical condition to OR and adds API Key option to the
IAM policy. If IAM policy exists and API Key is already selected in the policy,
the package activation changes the logical operant to OR alone.
After the deactivating package, the IAM policy that exists in the API
does not revert to old behavior.

This issue is resolved. After deactivating the package, the changes done by the
package are reverted if the API is associated to only one package, if it is
associated to multiple package the changes will be reverted after all the
packages are deactivated.

YAI-22461 (Fix 7)
'Modified Time' field of API shows 'Invalid date' as the entry in the Internet
Explorer browser.

When you click the APIs tab, in the Manage APIs screen, the 'Modified Time'
field of API shows 'Invalid date' as the entry in the Internet
Explorer browser.

This issue is resolved.

YAI-22463 (Fix 7)
Exceptions appear in the server.log file of API Gateway while creating Custom
Destination.

Exceptions appear in the server.log file of API Gateway while creating Custom
Destination with webMethods IS service.

This issue is resolved.

YAI-22563 (Fix 7)
When you perform SOAP to REST transformation, namespaces are not added to the
choice elements in WSDL while converting JSON request to XML.

This issue is resolved.

YAI-22737 (Fix 7)
User login Id is not case-sensitive.

You cannot create different login Ids with different cases as the value is not
case-sensitive in API Gateway.

This issue is resolved.

YAI-22841 (Fix 7)
Nonessential info level logs are printed when an API, which is configured with
Invoke IS Service policy is invoked.

When an API is configured with Invoke IS Service policy and when that API is
invoked over HTTP transport, nonessential info level logs are printed about
certificates.

This issue is resolved by changing the logging level to debug level.

YAI-22896 (Fix 7)
When you upgrade to API Gateway 10.7, the routing policy picks
the routing endpoint incorrectly.

This issue is resolved.

YAI-22730 (Fix 7)
Welcome page appears when navigating back from an application details page.

When you click an API from the APIs page, and click on an application to view
the application details, and if you click the back button then the Welcome page
appears instead of the API details page of the API.

This issue is resolved.

YAI-23042 (Fix 7)
Unable to restore data from backup snapshots.

This issue is resolved.	

YAI-23075 (Fix 7)
Unable to add conditions for the Request transformation, Response
transformation and CEP policies.

An error message appears when you try to add condition for the Request
transformation, Response transformation and CEP policies

This issue is resolved.

YAIC-3321 (Fix 6)
External Active Directory Federation Service (ADFS) user with a domain-based
login ID is unable to log on to API Gateway.

External ADFS user with a domain-based login ID such as 'eur\user' is unable
to log on to API Gateway.

This issue is resolved.


YAIC-3194 (Fix 6)
Few design-time actions fail in secondary node due to lack of ACL permission to
invoke the relevant IS service.

Few design-time actions like adding or updating a keystore fails in the
secondary node with the following error message,
'[ISS.0084.9004] Access Denied,' due to lack of ACL permission to
invoke the relevant IS service.

This issue is resolved.

YAI-21951 (Fix 6)
API Gateway does not evaluate Array expressions in JSON Path.

When queried with array expressions, API Gateway returns only the first element
at index[0] and the remaining elements are not returned in the response. To
resolve this, API Gateway evaluates and supports the Array expressions in JSON
Path now.

Example: Consider the following Payload.
{"firstName":"John","lastName":"doe","age":26,"address":

{"streetAddress": "naist street","city":"Nara","postalCode":"630-0192"}

,"phoneNumbers":
[

{"type":"iPhone","number":"0123-4567-8888"}

,{"type":"home",
"number":"0123-4567-8910"}]}

Following are the responses for the expressions before and after evaluating the
Array expressions in JSON Path.

Expression 1: $.phoneNumbers[1].type
Response before and after: "home"

Expression 2: $.phoneNumbers[0,1].type or $.phoneNumbers[:2].type
Response before: "iPhone"
Response after: ["iPhone","home"]

Expression 3: $.phoneNumbers[0,1] or $.phoneNumbers[:2]
Response before: no response
Response after: [

{"type":"iPhone","number":"0123-4567-8888"}

{"type":"home",
"number":"0123-4567-8910"}]

Expression 4: $..firstName
Response before: "John"
Response after: ["John"]

Expression 5: $.firstName
Response before and after: "John"

Expression 6: $.address.city
Response before and after: "Nara"

This issue is resolved and API Gateway returns all elements when queried
with Array expressions in JSON Path now.
 
YAI-21412 (Fix 6)
HTTP Headers based identification does not work

When you enforce an API with Identify and Authorize policy whose identification
type is set to HTTP header and if you have configured custom extension policy to
set the header during the runtime using a Invoke webMethods IS service, the runtime
request for the API fails with 403 error.

This issue is resolved.

YAIC-3217 (Fix 6)
'User settings' menu appears in API Gateway Cloud.

In API Gateway Cloud, the profile menu, that is the 'User settings' menu appears
under 'Administration' drop-down.

This issue is resolved.

YAIC-3051 (Fix 6)
'webMethods IS service' appears in API Gateway cloud.

In API Gateway cloud, 'webMethods IS service' appears in the 'Type' drop-down of
both Custom Extension, and Destination.

'webMethods IS service' is masked now.


YAIC-3039 (Fix 6)
Monitor events not listed in analytics page.

When the Team feature is enabled, the monitor events that are created for the
transactions, which are initiated without an application to authenticate does
not appear in the Analytics page. However, the monitor event are recorded in the
database.

This issue is resolved.


YAI-21526 (Fix 5)
User-defined conditions are not evaluated in Custom Extension policy when
'Custom Variable' action is chosen.

When the Custom Extension policy is configured with 'Custom Variable' action,
the user-defined conditions are not evaluated. Henceforth, the configured custom
variables are set even when the conditions evaluate to 'false'.

This issue is resolved. Custom variables configured are set only when the
conditions in the policy evaluate to 'true.'

YAI-21385 (Fix 5)
Exporting assets fails with 401 for a user with Export assets privilege.

Exporting assets with a POST request by a user 'Exporter' who has only Export
assets privileges fails with HTTP status 401 Unauthorized.

This issue is resolved.

YAI-21429 (Fix 5)
System variables used in the Conditional Error Processing policy are not
resolved.

System variables like $DATE, $TIME, and $SERVICE are not resolved when you use
in the Conditional Error Processing policy.

This issue is resolved.


YAI-20525 (Fix 5)
In API Gateway, when the Dashboard cache is created or deleted, as a part of
API Gateway's internal scheduled process, a Null pointer exception is generated
in the logs.

This issue is resolved.

YAI-20449 (Fix 5)
Client credentials not cleared when you refresh application strategy.

When you refresh the OAuth2 strategy of an application, the system does not
clear the client credentials from Integration Server.

The issue is resolved.


YAIC-3196 (Fix 5)
Stage URL appears incorrectly for the auto-generated stages in Promotion
management for the tenants.

The Stage URL in the 'Technical information' under 'Promotion management'
appears incorrectly for the auto-generated stages.

This issue is resolved.

YAIC-3191 (Fix 5)
Few Cloud-Tenant-Administrators lost administrator role in API Gateway.

Few Cloud-Tenant-Administrator-Users who have specified an 'email' with the same
domain name as the login ID lost their administrator privileges in API Gateway.

This issue is resolved.

YAIC-3067 (Fix 5)
Configuration test operation of API Portal with API Gateway fails when API
Portal is provisioned by default.

In Cloud, when API Portal is provisioned with API Gateway by default and when
you test that configuration, the 'Test' operation fails with the following
error message: "Portal configuration test fails: Unauthorized user."

This issue is resolved by removing the 'Test' button from the API Portal
Destination screen in API Gateway Cloud only for the scenario where API Portal is
provisioned by default. The Test button appears for other scenarios.

YAIC-2983 (Fix 5)
Upgradation of keycloak jar files.

The following keycloak jar files are upgraded to improve security.
keycloak-adapter-core
keycloak-adapter-spi
keycloak-common
keycloak-core
keycloak-servlet-adapter-spi
keycloak-servlet-filter-adapter

YAI-21090 (Fix 5)
Unable to create PKCS12 keystore type.

When you create a keystore type of PKCS12 from the Administration > Security >
Keystore/Truststore screen, an error message appears.

This issue is resolved.


YAI-20656 (Fix 4)
Unable to access the Accessibility module.

A blank page appears when you access the API Gateway Accessibility module.

This issue is resolved.

YAI-20515 (Fix 4)
In API Gateway 10.7, When you start the server, the following log message is
recorded continuously in the log files and consumes disk space.

By default, the extended setting startDayOfTheWeek property is set to MONDAY. 
Hence on Sunday night 23:59:59, API Gateway tries to reschedule the internal 
scheduler to next Sunday. However, it reschedules the internal scheduler to the
same date again and again. This causes the system disk to get filled with the 
log statements.

This issue is fixed.
 
YAI-20459 (Fix 4)
The fields such as "gatewayEndpoints" and "provider" are not migrated to 10.7 
from 10.5.

Now the issue is fixed. So all the fields introduced in 10.5 will be migrated
to 10.7.

YAI-20386 (Fix 4)
Malicious file upload in API Gateway application identifiers.

In the API Gateway UI, when you try to create or edit an application, it allows
you to upload any file for a client certificate in the identifiers section.
This might lead to an invalid or malicious file upload for the client
certificates.

This issue is resolved. Validation for the uploaded file is enabled to check if
it is a certificate. If an invalid file is uploaded, an error message appears,
when you try to save the application.

YAI-18966 (Fix 4)
The Swagger generator used to create APIs in API Gateway does not populate 
response schema with proper model defined for resources.  

This issue is now resolved.

YAIC-3027 (Fix 4)
Group user association and team admin users lost after promoting a team or
group.

Group user association and team admin users are lost on promoting a team or
a group from a lower environment.

This issue is resolved.

YAIC-3043 (Fix 4)
Changes in mock responses are not saved in API Gateway for CentraSite API.

When adding a mock response to a REST API, which is deployed from CentraSite to
API Gateway, this mock response is not saved in API Gateway.

This issue is resolved.
Note that all mock responses are now removed whenever you redeploy the API from
CentraSite to API Gateway.

YAIC-3015 (Fix 4)
Archive behavior change after applying 10.5 fix 10.

When you apply 10.5 fix 10 and try to retrieve the transaction data, the archive
behavior changes. The structure of the generated zip file changes, creating an
extra folder based on the event type and all events are stored in a single line
instead of an event per line.

This issue is resolved.

YAIC-3001 (Fix 4)
When you try to promote an API which has line breaks between subsequent lines
in the Description field, the asset promotion fails. You receive an error
message that states Error reading inputstream: 'stream'.

This issue is resolved. 

YAIC-2966 (Fix 4)
Environment switcher works incorrectly.

If you have enabled custom domain, at times API Gateway displays incorrect
environment name in the Current environment field.

This issue is resolved.

YAI-20700 (Fix 4)
Unable to create API Gateway ports in Command Central.

When you try to create API Gateway port in Command Central either through
templates or from UI, API Gateway returns an error. This is
because API gateway is attempting to update the ports instead of
creating new ones.

This issue is resolved.

YAI-20668 (Fix 4)
When you receive a JSON response for a REST invoke of a SOAP API and if it 
contains decimal values (like 5.6700), the decimal values are converted to strings.

This issue is now fixed.

YAI-20650 (Fix 4)
Non team member was able to associate an API to the authorization server scope.

A team member belonging to a different team than the API is able to map the 
authorization server scopes.

The issue is resolved.

YAI-20594 (Fix 4)
Ports are deleted on the cluster while restarting an API Gateway node

When you restart an API Gateway node, in some cases ports are deleted and the
server log displays an error message. The error message is as follows:
Error while creating local port [ISS.0084.9004] Access Denied

The issue is resolved.

YAI-20586 (Fix 4)
An user with Manage user administration privilege is able to see other team assets.

In the API details page when a user with Manage user administration privilege 
is able to view APIs that are not part of his team when the team filter is applied.

The issue is resolved.

YAI-20557 (Fix 4)
APIs are deactivated after deploying the APIs to API Gateway using Deployer.

After deploying APIs to API Gateway using Deployer, some APIs, which are not
part of the deployment are found to be deactivated.

This issue is resolved. 

YAI-20076 (Fix 4)
Zero downtime upgrade fails when the source tenant name is specified as gateway.

While performing a zero downtime upgrade, when you specify the source tenant
name as 'gateway,' the reindex operation fails.

This issue is resolved.



YAI-20446 (Fix 3)
Indices like accesscontrollist, proxybypass, rule and webhooks are not migrated to 10.7.

This issue is now resolved.

YAIC-2882 (Fix 2)
API usage report page on 1st of the month showing previous billing cycle

On 1st day of the month, the api usage report page in cloud shows the previous 
billing cycle.

This issue is now resolved.

YAIC-2880
Unable to create, update and delete transaction alerts in cloud

User couldn't create, update and delete transaction alerts in cloud

This issue is resolved now.

YAIC-2833
on prem login screen is seen in API Gateway cloud

During the login, if the API Gateway service had issues, at times on-prem login screen is shown.

This issue is now fixed.

YAIC-2564
Unable to see details for user with login id having backslash character in user 
detail page.

The backslash character in user id is not supported by API Gateway

This issue is resolved.

YAI-18609
User having only "View administration configurations" privilege and not having
the "Manage admin configurations" privilege could see the 'Save' button in some
of the pages in the Administration section. When the 'Save' button is clicked,
some unclear error messages appear.

The issue is resolved. The 'Save' button is hidden for users who do not have
the sufficient privileges.

YAI-18775
Incorrect transformed request and response observed for a REST enabled SOAP API.

When SOAP to REST transformation is enabled for a SOAP API and the JSON request
or response contains '00100', the leading zeros are removed in the transformed
request and response respectively.

This issue is resolved.

YAI-19561
When invoking an SOAP API which is SOAP to Rest transformation enabled with JSON
request , space in the the JSON key/value is removed.

This issue is fixed.

YAI-19602
Slash gets added before the query parameters in the request URLs.

In the Routing policy, if you specify the Routing Endpoint with an URL of format
baseurl${sys:resource_path} that is, without a slash in between baseurl and
${sys:resource_path}, and if the incoming request from client is of format
gatewayurl?a=b that is, no path parameters between gatewayurl and query params but
only query parameter is present, then a slash "/" gets added before the query
parameters in the request url sent from API Gateway to native service.

This issue is resolved.

YAI-19610
Exception message displays ESB service name in response to the client.

When exception occurs in Invoke IS Service, API Gateway displays the ESB service
name along with exception as a response to the client. The ESB service name in
the response reveals the provider's configuration.

This issue is resolved. Now, if a ServiceException or FlowException occurs, the
message given in the exception is displayed to the client. If any other
exception occurs, a generic error message is displayed to the client hiding the
ESB service name.

YAI-19612
Unable to generate API Gateway events for SOAP 1.2 request.
 
When you invoke a SOAP API whose Transport policy is set to SOAP 1.2 and if you
have enforced the API with Log Invocation policy, API Gateway is unable to
generate events for the invoked request.
 
This issue is resolved.

YAI-19735
When you import strategy, scope mapping gets missed.

When you import a strategy from lower environments without defining the scope in
the authorization server, scope mapping defined in the strategy is not imported.

This issue is resolved. Now, API Gateway automatically creates the missing scope
in the authorization server, when you import a strategy.

YAI-19837
When API Gateway sends JWT token URL to API Portal, the host names are displayed
incorrectly.

When you publish an application from API Gateway to API Portal, the JWT tokens
URLs are not sent as part of the payload. Hence, the host names are displayed
incorrectly in the API Portal.

This issue is resolved. Now, API Gateway builds JWT token URL and sends it to
API Portal when you publish an application.

YAI-19843
Error in publishing REST Service from CentraSite to API Gateway

Unable to publish REST Service from CentraSite to API Gateway because of the
issue in converting the swagger composed model to API Gateway model.

The issue is resolved. 

YAI-19880
CORS headers are not sent to the client when API invocation fails.

When you invoke an API enforced with CORS policy and if the API invocation
fails, then the configured CORS headers are not sent to the client.

This issue is resolved.

YAI-20079
Data Masking policy is not accepting the empty as masked value

When an API is enforced with Data Masking policy an empty value is not accepted
while saving the API. Now Data Masking policy accepts empty string as a mask 
value.
 
The issue is resolved.

YAI-20124
Updates to the asset type alias, in a cluster environment, fails.

In an API Gateway cluster, while trying to update the asset type alias (for
example, while deleting, importing or deploying the asset), an error occurs
with the following error message:"java.io.InvalidClassException: com.softwareag
.apigateway.api.model.alias.AuthServerAlias".

This issue is resolved.

YAI-19557
The WSDL for an activated SOAP API does not contain the endpoint displayed in
the API Gateway UI for the API.

The WSDL that API Gateway exposes for an activated SOAP API does not contain the
endpoint displayed in the API Gateway UI for the API, which is actually working.

This issue is resolved.
Now, the WSDL contains the required endpoint.

YAI-19584
Unable to create an API with $ syntax in Routing policy.

In the Routing policy, if you specify the Routing Endpoint with $ syntax. For
example, $var, which is not the ${var} syntax for the alias and if you save the
API, the "Index out of range" error message is displayed.

This issue is resolved.

YAI-19684
Administrator user gets removed, when archive import fails.

When you try to import archive and if the archive import fails, Administrator
user gets removed, when API Gateway tries to roll back the failed asset.

This issue is resolved.

YAI-19737
Exporting policies and configurations using a REST call fails when you use the
value *.

When trying to export all policy actions or approval configurations with a GET
call http://&lt;host&gt;:&lt;port&gt;/rest/apigateway/archive?policyActions=*
or
http://&lt;host&gt;:&lt;port&gt;/rest/apigateway/archive?approvalConfigurations=*
or if you just try to add one of these two parameters to a GET archive service
request, API Gateway responds with an HTTP status 400 and an error message as
response.

This issue is resolved.

YAI-19766
ServiceSetupException is logged in the server.log while collecting diagnostics.

ServiceSetupException gets logged in the server.log while collecting diagnostics
due to the following unavailable Java service methods exposed in API Gateway:
- addHost in class apigateway.ports
- ipAccessMode in class facade.apigateway.ports.accessMode
- getAPI in class pub.apigateway.providerspecification

This issue is resolved.

YAI-19770
Display of illegal group reference error message.

When you invoke an API with Dynamic Routing policy by setting the Route Using
rule as Header and if the header URL contains '/$', API Gateway displays the
"Illegal group reference" error message.

This issue is resolved.

YAI-19807
Removes the existing custom gateway endpoints.

When you update an API using "Update API" option, the existing custom gateway
endpoints are removed.

This issue is resolved.

YAI-19827
Ports definitions removed during unsuccessful startup of API Gateway.

Port definitions get permanently removed when API Gateway is shut down during
startup, because the primary port is already in use in the system.

This issue is resolved.

YAI-19904
Promotion of an API that contains an invalid document link fails.

Promoting an API with an invalid document link fails. When you export an API
with an invalid document link and try to import it again, the import fails with
an error message "Import archive failed".

This issue is resolved. Existing archives that contain APIs with an invalid
document link cannot be imported and must be exported again.

YAI-19917
Display of invalid identifier error message.

When you configure JDBC pools and if you have set the Log Invocation destination
to Audit Log, API Gateway dispalys invalid identifier error message when data
gets inserted into database.

This issue is resolved.

YAI-19957
Huge increase in CPU usage while retrieving WSDLs for SOAP APIs.

The computation of the WSDL of a SOAP API might take a long time when there are
many APIs registered in API Gateway.

This issue is fixed and this is now improved.

YAI-20015
Import of APIs fails with RemoteTransportException in error log.

When importing APIs to API Gateway it fails with the following error:
org.elasticsearch.search.SearchContextMissingException: No search context found
for id <[ID]>. This error might occur when there are many APIs defined in
API Gateway.

This issue is resolved.

YAI-20059
If a WS-Policy is defined for a API, its xml representation is not exposed in 
the wsdl. This is fixed now.

YAIC-2958
API document not deployed to all cluster nodes.

In a cluster environment, API documents added to an API are not always deployed
to all cluster nodes.

This issue is resolved.

YAI-19507
Unable to log into API Gateway after session timeout.

When you are inactive for certain period of time in API Gateway, session timeout
occurs and you are redirected to the API Gateway login page. In such case, as
the old session is not invalidated, you are unable to log into the API Gateway.

This issue is resolved.

YAI-19666
Missing '/' observed in the authorization URLs generated with the swagger
generator.

The authorization URLs generated using swagger generator were found to
have '/' missing in the authorization URLs.

This issue is resolved.

YAI-19270
When you start the API Gateway clusters, some of the SOAP APIs are not activated.
The SOAP APIs are not getting activated because the temp folder was emptied as 
part of an internal process.

This issue is now resolved.

YAI-19276
When you publish or unpublish data to API Portal, the audit log events for Publish
and Unpublish activity are missing for the respective APIs and packages,

This issue is now resolved.

YAI-19437
API creation fails when the consumes property is empty in root level and operation
level in the input swagger

YAI-19482
When configuring XSLT transformations in API Gateway the API Provider can disable
secure processing of XSLT documents by setting the 
http://javax.xml.XMLConstants/feature/secure-processing XML feature to false.

Because of this the API Gateway is prone to attacks where the API Provider can 
configure the XSLT to execute shell commands.

To overcome this with this fix the extended property pg_xslt_enableSecureProcessing
is used. This extended property is by default set to true and when true the API 
Provider cannot disable the secure processing of XSLT by setting the 
http://javax.xml.XMLConstants/feature/secure-processing feature to false. Even 
when set to false this will be ignored by API Gateway since the extended 
property takes precedence.

YAI-19628
Audience based application identification fails.

When you update the audience value in the application strategy, then audience

based application identification fails.

This issue is resolved.

YAI-19803
Global Policies are deactivated after restarting API Gateway.
When you restart API gateway, Global policies that contain transport policy action
are not activated.

This issue is now resolved.

YAI-19987
When you create an API with a native service endpoint, the native service 
endpoints display correctly in the API details page. However, when you refresh 
or reload the API details page, the native service endpoints details are not 
displayed. 

This issue is now resolved.

YAI-20035
Redirect URLs are not updated for CentraSite applications.

If you add redirect URLs from API Portal for an application that is published
from CentraSite, then the redirect URLs are not getting updated.

This issue is resolved.

YAI-20065
Overwriting of Gateway Scopes only during import.

When importing an archive, users cannot overwrite Gateway scopes alone.

This issue is resolved. A new check box, called Gateway Scope Overwrite, is
added to the <<screen/section names>> that enables you to select whether you want
to overwrite the Gateway scopes alone during an import.

YAI-18895
Default status code returned when a mocked API is invoked.

When only one status code is defined for a mocked response, the default status
code 200 is returned instead of the defined status code.

This issue is resolved.

YAI-19076
Resource path template matching is incorrect for the partial path parameters.

If a resource path has special character ":" colon in it, API Gateway fails
to route it to the correct resource if there multiple routes that partially
match the resource path. For example, if there is a request made to the
resource "/date/{dateId}", then the request is routed to the
"/date/{dateId}:refresh" resource.

This issue is resolved.

YAI-19079
The apigatewayUtil script configures incorrect path.repo value in the
elasticsearch.yml file.

This issue is resolved.

YAI-19254
When you import an API archive with the field 'type' is missing in the JSON 
schema and try to mock an API, the mock operation failed.

This issue is now resolved.

YAI-19311
When you try to execute the archive and purge event, the archive event was 
successful. However, the purge event fails and returns an error. 

This issue is now resolved.

YAI-19964
When you expose an API through mocking, you get a "response 400", which 
indicates a bad request error.

This issue is now resolved and you now receive a "response 200".

YAI-19994
An admin user could not modify the master password, since the update password 
button was hidden.

This issue is now resolved. Now an admin user can update the master password.

YAI-20087
The purge operation fails with a timeout error when the number of documents to 
be purged is very large.

This issue is now resolved.

YAI-20106
When you promote an API, the application associated with the API is also promoted. 

This issue is now resolved. 

YAI-20121
Custom endpoints and JWT security details not added in Open API specification.

Open API specification exported from API Gateway does not include the
custom gateway endpoints and the JWT authentication policy wherever applicable.

This issue is resolved.

YAI-20174
Custom endpoints of SOAP API are published incorrectly to API Portal.

When publishing SOAP APIs to API Portal, API Portal displays the custom
endpoints with the 'customEndpoint' prefix.

This issue is resolved.

YAI-19669
Publishing a virtual service from CentraSite to API Gateway fails.

Publishing a virtual service from CentraSite to API Gateway fails with an error
message when a service has erroneous schemas.

This issue is resolved.


YAI-20037
Once you migrate an AWS alias, the AWS alias does not have a region field, 
accesskey ID, and secretAccessKey.


This issue is now resolved.

YAI-16659
Existing API and application are deleted after import

After importing an API that is linked to an application and the API
and application both already exist on API Gateway, the API and
Applications are deleted after the failed import.

This issue is resolved. The existing API and applications are restored when the
import fails.

YAI-19434
Default gateway endpoints does not appear in a cluster environment.

In a cluster environment, the default gateway endpoints are not displayed in few
of the API Gateway instances.

This issue is resolved.

YAI-18768
"Restart is required for changes to take effect" is displayed in IS administration
screen for every APIGateway restart

When APIGateway is configured with LDAP and the its restarted "Restart is required
for changes to take effect" message is displayed even after restart.

The issue is resolved.

YAI-19096
Multiple issues observed during zero downtime upgrade.

Unable to set source tenant name using migration REST API due to incorrect
 swagger documentation.
 REST API for API Gateway server shutdown or restart is not available.
 Sending webhook notification to endpoints for migration actions does not have
 proper logs.
 Rollover of analytics index using Elasticsearch creates new a index without the
 settings and mappings from the original index.
Quota migration and recovery sporadically fails when pgmen.quotaSurvival.interval
has short interval value.

All these issues are resolved.
 REST API for API Gateway server shutdown is added in the swagger document.
 
YAIC-2864
The logs and events data migration fails when migrated from
API Gateway 10.5 to 10.7.

When migrating the logs and events data from API Gateway 10.5 to 10.7, the
migration fails with an error "Error doing operation on elasticsearch -
Reindexing of APIs failed as no. of assets created is different than total
number of assets for the indexgateway_stgtrail_license,type =
monthlyAggregatedDetails".

This issue is resolved. This is achieved by moving the indices
gateway_default_license_monthlythAggregatedDetails and
gateway_default_license_apiUsageDetails from logs and events to core data
migration.

YAI-19641
Kerberos setting export failed

Kerberos settings export fails when a export is triggered for all the APIGateway
assets and if kerberos settings doesn't have any inputs.

The issue is resolved.

YAI-18210
Runtime events are not sorted in the right order

Runtime events on the API Analytics page are not sorted based on the time stamp
of the event occurrence.

This issue is resolved.


YAI-19222 (Fix 1)
Backup creation fails when performing migration from REST API for docker.

When you invoke the migration REST API with the action 'clean', the request
fails with a response message "path.repo is not configured in some or all target
Elasticsearch nodes of the cluster" even though the path.repo property is
configured in that Elasticsearch instance.

This issue is resolved.

YAI-19093 (Fix 1)
Following issues are encountered when enabling SAML in API Gateway:

1) When user groups are mapped from the incoming SAML SSO assertions, custom
groups are incorrectly mapped to the API Gateway groups.
2) When you log out of API Gateway or when there is a session timeout, API
Gateway session does not terminate properly.
3) Everytime you log into API Gateway through SSO, you are mapped to different
teams.
4) When you configure SSO and if there is any problem, API Gateway does not the
display the corresponding error message.
5) User groups are not displayed correctly as the stale cache entries are not
removed from the API Gateway user management.

These issues are resolved.

YAI-18954
Double-byte characters are encoded in API Gateway.

When double-byte characters are used in policy description, API Gateway encodes
the double-byte characters and does not display the original character entered.

This issue is resolved.

YAI-18484
Updating the quota limit in a plan after subscribing to the plan displays the
remaining time interval inconsistently.

After subscribing to a plan, when you change the quota interval limit in the
plan, the remaining time in the subscription usage page displays inconsistently.

This issue is resolved.

YAI-18483
Deployment of packages and subscription fails when deployed through ABE.

When API Gateway assets, package and dependent subscription, are deployed
through ABE, the import fails. The package and subscription have cyclic
dependency which causes subscription import before the package in some cases
that causes the failures.

This issue is resolved.

YAI-18480
Subscriptions are not created properly in a clustered environment.

In a clustered environment, if a subscription is requested from the API Portal
to clustered API Gateway, the subscription is created sometimes and at times it
is not created. If the request goes to the node that is the controlling node
then a subscription is created else subscription is not created.

This issue is resolved.

YAI-18415
Unable to configure SSL certificates for external Elasticsearch destination.

This issue is resolved.
API Gateway now provides an option to configure SSL certificates for external
Elasticsearch destination.

YAI-18537
Incorrect status displayed for failed archive and purge events.

When you archive or purge API Gateway events, and if the transaction fails, the
status of the respective job is displayed as 'Completed'.

This issue is resolved. 

YAI-18877
Unable to synchronize URL aliases across clusters.

When you log in to API Gateway as any user other than Administrator, and if you
create a new URL alias, the newly created the URL alias does not synchronize
across all nodes of a cluster.

This issue is resolved.

YAI-18949
Unable to create SOAP UI project with API Gateway 10.5 end point.

The WSDL does not contain the necessary API elements due to the global
transport policy being active.

This issue is resolved.

YAI-18985
The Availability API responds with false positives while monitoring the health
of the API Gateway nodes.

The health check does not work properly and responds with false positives when
some components of API Gateway, such as API Gateway UI and Elasticsearch, are
configured with HTTPS access.

This issue is resolved.

YAI-19030
Custom endpoints in WSDL files are not working for SOAP APIs.

Custom endpoints URLs in WSDL files are not working.

This issue is resolved.

YAI-19067
Existing API is deleted after an unsuccessful import.

When an import of an API that has the overwrite option selected fails, the
existing API is removed from API Gateway.

This issue is resolved. When the import of an API with overwrite fails,
API Gateway now restores the existing API.

YAI-19108
API undeployed after import.

An API, which already exists in API Gateway with other REST resources and is
active, on being imported ends with a failure message of NullPointerException.
The API is deleted after import.

This issue is resolved.

YAI-19161
Acknowledgement messages displayed when you create, edit, or register
applications close in few seconds.

If you have enabled approval flow for application creation, update, and
registration, and when you create, edit, or register an application, the
message displayed to convey the status closes in few seconds.

This issue is resolved. The message is now displayed in a dialog box. You can
close it manually after reading the message. 

YAI-19180
API Gateway server log fills up with cluster synchronization log messages.

In an API Gateway cluster the server log increases every 10 seconds with a
message about cluster synchronization, even though there are no cluster
synchronization issues.

This issue is resolved.

YAI-19182
Archive import returns a wrong HTTP status when the archive is not found.

After sending an archive import REST request call with an invalid archive path,
API Gateway responds with the HTTP status code 500 along with a response
message: "Internal Server Error".

This issue is resolved.

YAI-19186
Displays error message while you try to save the updated API.

When you update an API and if the custom gateway endpoint partially matches with
the default gateway endpoint, an error message is displayed while you save the
updated API.

This issue is resolved. Now, API Gateway does not allow you to create a custom
gateway endpoint, if it partially matches with the default gateway endpoint.

YAI-19203
Incorrect WSDL service name definitions for SOAP API.

A SOAP API in API Gateway does not adapt the wsdl:service name when the WSDL 
is exposed . The name value must be the API name.

This issue is resolved. 

YAI-19225
Unable to login to API Gateway

When you try to log into API Gateway, API Gateway does not allow to login as the
Everybody group gets removed during the CI/CD process.

This issue is resolved.

YAI-19286
Displays incorrect gateway endpoints

When you publish a virtual service from CentraSite to API Gateway and if the
invocation alias has the "/" character, API Gateway displays incorrect gateway
endpoints.

This issue is resolved.

YAI-19368
The on-prem API Gateway is reporting the tenant name as default always to metering 
agent, for all the non default IS instances.

This issue is fixed now.

YAI-19485
Incorrect status code appears when you invoke a SOAP API enforced with Identify
& Authorize Application policy.

When you invoke a SOAP API enforced with Identify & Authorize Application policy
that has multiple application identifications configured with OR condition, API
Gateway returns 401 status code to the client on successful invocation.

This issue is resolved.

YAIC-2552
Duplicate details displayed in Analytics dashboard.

The API usage details for certain months are displayed twice in the Analytics >
API Usage > Dashboard screen.

This issue is resolved.

YAI-18673
Unable to publish the virtual service from CentraSite to API Gateway, if the
virtual service is configured with "Require Signing" policy.
 
In CentraSite when you configure a virtual service with "Require Signing" policy
and if you select "Sign by" value as "Element", without specifying the namespace,
then the virtual service is not published to API Gateway.
 
This issue is resolved.

YAI-18628
Unable to create Threat Protection rules with deleted rule names.

When you delete a Threat Protection rule, and create another rule with the
same name as that of a deleted rule, an error message appears.

This issue is resolved.

YAI-18610
OSGI log levels are not updated correctly.
 
When you update the log level in the Administration > General > Application
logs page, then the OSGI logs are not updated properly.
 
This issue is resolved.

YAI-18591
Password is visible in clear text.

When a service is deployed from API Gateway through AppMesh to Kubernetes
then the API Gateway password is visible in clear text in the Kubernetes pod
description.

This issue is resolved. 

YAI-18540
Unable to determine the client ID using remote introspection.

When client ID cannot be determined from local introspection, the remote
introspection results are not used to identify the client ID.
 
This issue is resolved. 

YAI-18501
Health check operation is not available for all users.

Users should be able to perform health checks without providing credentials of
powerful users the and the authorization for /health/admin and /health/engine
needs to be relaxed. All valid API Gateway users should be able to access these
endpoints.

This issue is resolved.

YAI-18492
Activation of a Soap API deployed from CentraSite fails.

The activation of a SOAP API deployed from CentraSite to API Gateway fails. The
log files display the error message as "At least one endpoint should be set as
primary".

This issue is resolved.

YAI-18468
User not assigned to the mapped team and permissions.

When you promote a user with the user group and team mapped to the user, the
user is not assigned with the user group and team in the target environment.

This issue is resolved.

YAI-18461
Imported application displays incorrect client secret.

When you import an application from a 10.3 API Gateway instance, the
original client secret is changed.

This issue is resolved.

YAI-18436
Health check returns wrong results for Terracotta.

The health check rest/apigateway/health/engine reported one healthy node even
though Terracotta Server Array was not configured.

This issue is resolved.
The health check now reports the status as 'not configured' for Terracotta.

YAI-18434
Association of APIs and applications after import are not as expected.

After importing an API that is associated to one or more applications, these
associations are not always as expected.

This issue is resolved.
For updates regarding the application registrations during export and import,
see API Gateway User's Guide.

YAI-18386
Allow partial path parameters in URL when invoking REST API.

You can now mention partial path parameters to invoke a REST API. Earlier, if
you mention the path parameter partially during REST API creation,
an error message was displayed when you invoke the API.

YAI-18354
Access token expiration date is not displayed for OAuth tokens in the "Internal
authorization server" section.
 
The expiration date of OAuth access tokens is not displayed in the
"Administration > Security > JWT/ Oauth/ OpenID > Internal authorization server“
section.
 
This issue is resolved. A new column is added in the "Oauth tokens" section to
display the expiration date of the access tokens.

YAI-18347
View Analytics pages results in high CPU usage, when Team support is enabled.

When you enable the "enableTeamWork" setting and if you view the Analytics page,
high CPU usage is encountered.

This issues is resolved 

YAI-18338
Teams name does not appear in the API details page.
 
When you refresh the API details page, the Teams name does not appear.
 
This issues is resolved 

YAI-18254
Port available in API Gateway but is not available in Integration Server UI.

When a port is deleted in the Integration Server UI by mistake, it is still
available in API Gateway UI. When you try to update this port in the
API Gateway UI an error message displays: "There is an error while updating the
port. No listener defined for this port."

This issue is resolved.
When updating such a port it API Gateway UI, it is now created again as
Integration Server port.

YAI-19478

YAI-19454
Displays error message on dashboard index when you start the API Gateway for the
first time.

When you start the API Gateway for the first time after the installation, the
"Dashboard index does not exist" error message is displayed.

This issue is resolved.

YAI-19231
Vulnerable 3rd Party Component bcprov Used

Vulnerability found in bcprov-jdk15on-1.65.jar used in API Gateway. The jar is 
upgraded to bcprov-jdk15on-1.68.jar

This issue is resolved.

YAI-18799
The restore operation fails while restoring backed up data in an API Gateway
instance.

When a backup is restored in an API Gateway instance, the restore utility
fails with an exception as follows:
java.lang.IllegalStateException: alias [gateway_default_analytics_errorevents]
has more than one write index [gateway_default_analytics_errorevents_
1601382113205-000001].

The issue occurs since the restore utility tries to create another index under 
gateway_default_analytics_errorevents alias with the write index set as true. 
This is the case with the other aliases which support multiple indices like 
auditlogs, logs, etc

This is resolved by removing such indices before restoring.

YAI-18725
The command prompt does not exit even after a successful migration.

When running the migration utility, the command prompt does not exit even after
the migration is complete.

This issue is resolved.

YAI-18554
Target API Gateway not accessible after migrating the core indices.

During zero downtime upgrade, after a clean, reindex of core indices, and
transform, the target API Gateway does not start successfully due to multiple
exceptions.

This issue is resolved.

YAI-18409
UI issue in Conditional Error Processing policy.

In Conditional Error processing policy, the default placeholder values were not
displayed similar to the rest of the policies during the Response Processing
stage.

This issue is resolved.

YAI-18408
Suggestions do not appear when applying or editing Conditional Error Processing Policy.

When you apply or modify Conditional Error Processing policies to OData APIs,
predefined variables do not appear as suggestion.

This issue is resolved.

YAI-17063
Dynamic field mapping results mapping explosion in Elasticsearch.

When you configure dynamic field mapping for transactional events, large number
of unnecessary mappings are created in Elasticsearch.

This issue is resolved.

YAIC-2567
Unable to add rate limit for interval unit calendar week and calendar month in
the plan rate limit section.

Unable to add the rate limit for interval unit calendar week and calendar month
in the plan rate limit section as the field is in a disabled state.

This issue is resolved.

YAI-19536
E-mails are not trigged for Invocation Failure events.

When you invoke an API enforced with Identify & Authorize Application and Log
Invocation policies, and if you have selected Email destination in the Log
Invocation policy, and if the API invocation fails at the Identify & Access
stage, then the transaction failure e-mail is not triggered.

This issue is resolved.

YAI-19446
API invocation fails if you have configured Outbound Auth-Transport policy with
NTLM authentication scheme.

When you have configured HTTPS port with "Use JSSE" option being selected and if
you have configured Outbound Auth-Transport policy with NTLM authentication
scheme, API invocation fails when you invoke the API using the secure port.

This issue is resolved.

YAI-19257
When you promote an API, the dependent assets get promoted incorrectly.

For example, when you define an API named "api1" that is associated with two
applications "app1" and "app2" and if you promote "api1" by selecting the "app1"
application asset, both the application assets "app1" and "app2" get promoted.

This issue is resolved.

YAI-19115
Client registration fails in external authorization server.

When you try to get a access token from API Portal, client registration fails in
external authorization server .

This issue is resolved.

YAI-19100
Displays incorrect error message when OAuth token is not passed.

When OAuth token is not passed, API Gateway displays incorrect error message.

This issue is resolved.

YAI-19090
Displays incorrect error message.

When you invoke multiple SOAP services enforced with outbound authentication
message policy at the same time, API Gateway displays the "SOAP header missing"
error message in during some instances.

This issue is resolved.

YAI-19085
Invoke IS Service does not support processing of repeat query parameters.

When you configure "Invoke webMethods IS" policy with the "comply to IS Spec"
checkbox being checked in request processing stage and if the incoming request
contains multiple values for same query parameter name, then only one value of
the query param is passed to the native service.

This issue is resolved. Now, when you define an API, set the query parameter
as repeat so that Invoke IS Service supports processing of repeat query
parameters. This is achieved by selecting the "Repeat" checkbox in the
"Add Resource Parameter" section of the API details screen. To access or
transform the repeat query parameter at IS Service, you must define the data
type as "String List".

YAI-19021
Support to retrieve native endpoints using IS Service.

Native endpoints can now be retrieved using the "NATIVE_ENDPOINT" context
variable through the "pub.apigateway.ctxvar:getContextVariable" IS Service.
Access to the native endpoint using this context variable is supported in the
stages after routing policy is executed.

YAI-18987
The value of the pipeline variable payload is returned as null.

When you invoke an API with the Invoke IS Service option, the payload
is returned as null when the content type is application/soap+xml.

This issue is resolved.

YAI-18922
Swagger documentation added for OAuth scope Gateway APIs.

For OAuth scopes, the create, update, get , delete APIs are documented in the
API Gateway swagger documents.

YAI-18882
A new pipeline variable "authorization" is introduced to read authorization
related values via Invoke IS Service.

When you invoke an IS Service, a new pipeline variable "authorization" is passed
in the input pipeline variables during the Request Processing stage. The
"authorization" pipeline variables contain child pipeline variables with the
respective API Gateway values for fields such as clientId, authHeader,
certificates, and so on.

YAI-18874
Gateway scope import does not fill the authorization server scope.

When you import a gateway scope from lower environments (for example from test
to production environment) without defining the scope in the authorization
server, API Gateway does not detect that the scope definition is missing in the
authorization server and imports the
gateway scope as it is.

This issue is resolved. Now, API Gateway automatically creates the missing scope
in the authorization server, when you import the gateway scope.

YAI-18849
In an API Gateway cluster the creation of APIs and Applications becomes slower
over time.

This happens when cluster members are shut down and new cluster members are
added. The performance degradation is caused by a cluster data structure which
keeps growing. This data structure is stored in the ClusterNotifierCache in
the Terracotta Server Array.

This issue is resolved.

The cluster data structure is monitored for absent cluster members.
If a cluster member has not reacted for a certain period of time it is
regarded as stale, and its data is removed from the ClusterNotifierCache.
The default value for this time interval is 900 seconds. The interval can be
configured in the Administration > General > Extended Settings section, the
parameter name being "clusterNotifierCacheStaleInterval".

YAI-18738
Unable to assign the option 'deny for access mode' while creating ports.

Unable to assign the option 'deny for access mode' while creating ports from
Command Central using templates.

This issue is resolved.

YAI-18647
Additional assets selected for promotion.

During asset promotion, if you select an asset for promotion, click Next, and
if you click Back, then additional assets are displayed. Every time you click
Next and click Back, additional assets are selected for promotion.

This issue is resolved.

YAI-18573
New session is created with longer expiration time.
 
Each time you invoke an API with “Invoke webMethods IS“ policy, a new session is
created with longer expiration time.
 
This issue is resolved.

YAI-18524
YAI-18487
System disk space is observed to be exhausted with the repeated same set of log
messages.

The system disk space is observed to be exhausted with the repeated set of log
messages in the server log. The thread that is responsible for resetting quota
for interval unit calendar month and the calendar week floods the log file with
the same log message when resetting the quota.


6.0 Platform Support

webMethods API Gateway 10.7 Fix 30 is supported on the same 
platforms and operating systems and with the same JREs as 
webMethods API Gateway 10.7.


7.0 Cautions and Warnings

None


8.0 Installation

Install using the Software AG Update Manager or 
Command Central (9.5 or later). For instructions, see the 
corresponding documentation
at http://documentation.softwareag.com.



9.0 Uninstallation

Note: These instructions can only be used to uninstall the 
most recently installed fix. This action will revert your 
installation to the previously installed fix. You cannot 
apply these instructions to the previously installed fix.

Uninstall using the Software AG Update Manager or 
Command Central (9.5 or later). For instructions, see the 
corresponding documentation 
at http://documentation.softwareag.com.


10.0 Globalization

This fix conforms to the internationalization standards of the
webMethods product suite and includes support for operation in
any country, locale, or language as specified in the Installing
webMethods Products guide. It was not tested with non-English
configurations and non-ASCII data. However, this fix has no
globalization impact and can be applied to systems running in
any supported locale or configuration.


10.1 Localization

None


11.0 Copyright

Copyright © 2017 Software AG, Darmstadt, Germany and/or Software
AG USA Inc., Reston, VA, USA, and/or its subsidiaries and/or its
affiliates and/or their licensors.

The name Software AG and all Software AG product names are either
trademarks or registered trademarks of Software AG and/or
Software AG USA Inc. and/or its subsidiaries and/or its
affiliates and/or their licensors. Other company and product
names mentioned herein may be trademarks of their respective
owners.

Detailed information on trademarks and patents owned by
Software AG and/or its subsidiaries is located at
http://softwareag.com/licenses.

This software may include portions of third-party products. For
third-party copyright notices, license terms, additional rights
or restrictions, please refer to "License Texts, Copyright
Notices and Disclaimers of Third Party Products". For certain
specific third-party license restrictions, please refer to
section E of the Legal Notices available under "License Terms and
Conditions for Use of Software AG Products / Copyright and
Trademark Notices of Software AG Products". These documents are
part of the product documentation, located at
http://softwareag.com/licenses and/or in the root installation
directory of the licensed product(s).


12.0 Contacting Us

Authorized technical support contacts can reach Software AG
Global Support in the following ways:

  Web: https://empower.softwareag.com (online support center)

  E-mail: empower@softwareag.com

You can find complete contact information in our Global Support
Contact Directory at:

https://empower.softwareag.com/public_directory.asp

You can also visit our Software AG Developer Communities to
access additional articles, demos, and tutorials, technical 
information, samples, useful resources, online discussion forums
moderated by Software AG professionals, and more at:

http://communities.softwareag.com/ecosystem/communities/public/index.html
